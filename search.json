[{"path":"https://kwb-r.github.io/kwb.geosalz/articles/data-availability_fri.html","id":"install-r-packages","dir":"Articles","previous_headings":"","what":"1 Install R packages","title":"Data Availability Waterworks Friedrichshagen","text":"","code":"if (! require(\"remotes\")) {   install.packages(\"remotes\", repos = \"https://cloud.r-project.org\") }  remotes::install_github(\"kwb-r/kwb.geosalz\", dependencies = TRUE)"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/data-availability_fri.html","id":"define-paths","dir":"Articles","previous_headings":"","what":"2 Define paths","title":"Data Availability Waterworks Friedrichshagen","text":"","code":"# Define paths and resolve placeholders paths <- kwb.utils::resolve(list(   servername = Sys.getenv(\"servername\"),   root_server = \"//<servername>\",   project = \"geosalz\",   rawdata = \"<root_server>/rawdata/<project>/BWB_labor\",   processing = \"<root_server>/processing/<project>\",   cleaned_data_dir = \"<processing>/labor/cleaned-data\",   cleaned_data_rds = \"<cleaned_data_dir>/cleaned-data.Rds\",   foerdermengen = \"<rawdata>/2018-04-27 Rohwasser Bericht - Galerief√∂rdermengen.xlsx\",   parameters = \"<rawdata>/2018-06-01 Lab Parameter.xlsx\",   figures_dir = \"<processing>/figures\" ))"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/data-availability_fri.html","id":"input-data","dir":"Articles","previous_headings":"","what":"3 Input data","title":"Data Availability Waterworks Friedrichshagen","text":"Checkout Workflow vignette reproducing creation cleaned-data.Rds.","code":"library(kwb.geosalz)  ## Load water quality data (<= 2000, prepared within first phase of Geosalz ## project!); for creation see the \"workflow.Rmd\" vignette load(file = paths$cleaned_data_rds)  foerdermengen_ww <- kwb.geosalz::get_foerdermengen(paths$foerdermengen)  foerdermengen_fri_gal <- paths$foerdermengen %>%   kwb.geosalz::get_foerdermengen_gal_fri() %>%    dplyr::filter(!is.na(!.data$foerdermenge_m3))  readr::write_csv2(   foerdermengen_fri_gal,    file = file.path(paths$figures_dir, \"foerdermengen_fri_gal.csv\") )  para_info <- kwb.geosalz::get_parameters_meta(paths$parameters)  labordaten_ww_timeseries <- labordaten_ww %>%   dplyr::filter(     prufgegenstand == \"Rohwasser\",      werk == \"FRI\"   )   readr::write_csv2(   labordaten_ww_timeseries,   file = file.path(paths$figures_dir, \"Zeitreihen_FRI_Guete_Rohwasser.csv\") )  labordaten_ww_stats <- labordaten_ww_timeseries %>%   dplyr::group_by(     .data$para_id,     .data$para_kuerzel,      .data$para_kurzname,     .data$werk,      .data$galerie   ) %>%    dplyr::summarise(     date_min = as.Date(min(.data$Date)),     date_max = as.Date(max(.data$Date)),     period_days = diff(c(.data$date_min, .data$date_max)),     number_of_samples = dplyr::n(),      mean_sampling_intervall_days = round(       .data$period_days/.data$number_of_samples     )   ) %>%    dplyr::arrange(.data$para_id, .data$galerie)  readr::write_csv2(   labordaten_ww_stats,   file = file.path(paths$figures_dir, \"Stats_FRI_Guete_Rohwasser.csv\") )"},{"path":[]},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/data-availability_fri.html","id":"water-quality","dir":"Articles","previous_headings":"4 Visualisation","what":"4.1 Water quality","title":"Data Availability Waterworks Friedrichshagen","text":"","code":"#Check and in case the export directory is not available create it: fs::dir_create(paths$figures_dir, recurse = TRUE)  print(sprintf(\"Export figures/plots to: %s\", paths$figures_dir))  water_types <- c(\"Rohwasser\")  for (water_type in water_types) {      pdf_file <- file.path(     paths$figures_dir,     sprintf(\"Zeitreihen_FRI_%s_Guete.pdf\", water_type)   )      cat(sprintf(\"Creating plot:\\n%s\\n\", pdf_file))      pdf(file = pdf_file, width = 14, height = 9)      for (sel_para_id in unique(labordaten_ww$para_id)) {          my_selection <- sprintf(       \"%s (%s)\",       para_info$para_kurzname[para_info$para_id == sel_para_id],       water_type     )          tmp <- labordaten_ww %>%       dplyr::filter(         prufgegenstand == water_type,         para_id == sel_para_id,          werk == \"FRI\"       ) %>%       dplyr::filter(         stringr::str_detect(.data$galerie, pattern = \"GWW\", negate = TRUE)       )          y_label <-  sprintf(       \"%s (%s)\",       para_info$para_kurzname[para_info$para_id == sel_para_id],       paste0(unique(tmp$UnitName_org), collapse = \", \")     )          if (nrow(tmp) > 0) {              cat(sprintf(\"for %s\\n\", my_selection))              g <- ggplot2::ggplot(tmp, mapping = ggplot2::aes_string(         x = \"Date\",         y = \"DataValue\",         col = \"galerie\"       )) +         ggplot2::geom_point() +         ggplot2::geom_line() +         ggplot2::theme_bw() +         ggplot2::ggtitle(label = my_selection) +         ggplot2::labs(x = \"\", y = y_label)              print(g)            } else {              cat(sprintf(\"not data availabe for %s\\n\", my_selection))     }   }      dev.off() }"},{"path":[]},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/data-availability_fri.html","id":"total","dir":"Articles","previous_headings":"4 Visualisation > 4.2 Yearly Abstraction Volume","what":"4.2.1 Total","title":"Data Availability Waterworks Friedrichshagen","text":"","code":"pdf_file <- file.path(   paths$figures_dir,   \"Zeitreihen_FRI_Gesamt_Jahresfoerdermengen.pdf\" )  pdf(file = pdf_file, width = 14, height = 9)  foerdermengen_ww %>%   dplyr::filter(.data$Wasserwerk == \"Friedrichshagen\") %>%    ggplot2::ggplot(mapping = ggplot2::aes_string(     x = \"year\",     y = \"Foerdermenge_m3\",     col = \"werk\"   )) +    ggplot2::geom_point() +   ggplot2::geom_line() +   ggplot2::theme_bw() +   ggplot2::ggtitle(label = \"Wasserwerk Friedrichshagen\") +   ggplot2::labs(x = \"Datum\", y = \"Jahresf\\u00F6rdermenge (m3)\")  dev.off()"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/data-availability_fri.html","id":"by-well-galeries","dir":"Articles","previous_headings":"4 Visualisation > 4.2 Yearly Abstraction Volume","what":"4.2.2 By Well Galeries","title":"Data Availability Waterworks Friedrichshagen","text":"","code":"pdf_file <- file.path(   paths$figures_dir,   \"Zeitreihen_FRI_Galerien_Jahresfoerdermengen.pdf\" )  pdf(file = pdf_file, width = 14, height = 9)  foerdermengen_fri_gal %>%     ggplot2::ggplot(mapping = ggplot2::aes_string(     x = \"date\",     y = \"foerdermenge_m3\",      col = \"galerie\"   )) +    ggplot2::geom_point() +   ggplot2::geom_line() +   ggplot2::theme_bw() +   ggplot2::ggtitle(label = \"Brunnengalerien FRI\") +   ggplot2::labs(x = \"Datum\", y = \"Jahresf\\u00F6rdermenge (m3)\")  dev.off()  pdf_file <- file.path(   paths$figures_dir,   \"Zeitreihen_FRI_Galerien_Jahresfoerdermengen_multipage.pdf\" )  pdf(file = pdf_file, width = 14, height = 9)  tmp <- foerdermengen_fri_gal %>%     dplyr::mutate(foerdermenge_million_m3 = .data$foerdermenge_m3/1000000)  n_pages <- tmp %>%    dplyr::count(.data$galerie) %>%    dplyr::pull(.data$galerie) %>%    length()  for (page in seq_len(n_pages)) {   print(     tmp %>%        ggplot2::ggplot(mapping = ggplot2::aes_string(         x = \"date\",          y = \"foerdermenge_million_m3\"       )) +        ggforce::facet_wrap_paginate(~ galerie, ncol = 1, nrow = 1, page = page) +       #ggplot2::facet_wrap(~ galerie, ncol = 1) +        ggplot2::geom_point() +       ggplot2::geom_line() +       ggplot2::labs(x = \"Datum\", y = \"Foerdermenge (m3/Jahr)\") +       ggplot2::theme_bw()   ) }  #dev.off()  kwb.utils::finishAndShowPdf(PDF = pdf_file)"},{"path":[]},{"path":[]},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/data-availability_fri.html","id":"packages","dir":"Articles","previous_headings":"5 Session Info","what":"Packages","title":"Data Availability Waterworks Friedrichshagen","text":"","code":"#>  package     * version date (UTC) lib source #>  bslib         0.6.1   2023-11-28 [1] CRAN (R 4.3.2) #>  cachem        1.0.8   2023-05-01 [1] RSPM (R 4.3.0) #>  cli           3.6.2   2023-12-11 [1] CRAN (R 4.3.2) #>  desc          1.4.2   2022-09-08 [1] RSPM (R 4.3.0) #>  digest        0.6.34  2024-01-11 [1] CRAN (R 4.3.2) #>  dplyr       * 1.1.4   2023-11-17 [1] CRAN (R 4.3.2) #>  evaluate      0.23    2023-11-01 [1] CRAN (R 4.3.2) #>  fansi         1.0.6   2023-12-08 [1] CRAN (R 4.3.2) #>  fastmap       1.1.1   2023-02-24 [1] RSPM (R 4.3.0) #>  fs            1.6.3   2023-07-20 [1] RSPM (R 4.3.0) #>  generics      0.1.3   2022-07-05 [1] RSPM (R 4.3.0) #>  glue          1.7.0   2024-01-09 [1] CRAN (R 4.3.2) #>  htmltools     0.5.7   2023-11-03 [1] CRAN (R 4.3.2) #>  jquerylib     0.1.4   2021-04-26 [1] RSPM (R 4.3.0) #>  jsonlite      1.8.8   2023-12-04 [1] CRAN (R 4.3.2) #>  knitr         1.45    2023-10-30 [1] CRAN (R 4.3.1) #>  kwb.utils     0.14.1  2023-09-23 [1] Github (kwb-r/kwb.utils@0930eae) #>  lifecycle     1.0.4   2023-11-07 [1] CRAN (R 4.3.2) #>  magrittr      2.0.3   2022-03-30 [1] RSPM (R 4.3.0) #>  memoise       2.0.1   2021-11-26 [1] RSPM (R 4.3.0) #>  pillar        1.9.0   2023-03-22 [1] RSPM (R 4.3.0) #>  pkgconfig     2.0.3   2019-09-22 [1] RSPM (R 4.3.0) #>  pkgdown       2.0.7   2022-12-14 [1] RSPM (R 4.3.0) #>  purrr         1.0.2   2023-08-10 [1] RSPM (R 4.3.0) #>  R6            2.5.1   2021-08-19 [1] RSPM (R 4.3.0) #>  ragg          1.2.5   2023-01-12 [1] RSPM (R 4.3.0) #>  rlang         1.1.3   2024-01-10 [1] CRAN (R 4.3.2) #>  rmarkdown     2.25    2023-09-18 [1] RSPM (R 4.3.0) #>  rprojroot     2.0.3   2022-04-02 [1] RSPM (R 4.3.0) #>  sass          0.4.8   2023-12-06 [1] CRAN (R 4.3.2) #>  sessioninfo   1.2.2   2021-12-06 [1] RSPM (R 4.3.0) #>  stringi       1.8.3   2023-12-11 [1] CRAN (R 4.3.2) #>  stringr       1.5.1   2023-11-14 [1] CRAN (R 4.3.2) #>  systemfonts   1.0.5   2023-10-09 [1] CRAN (R 4.3.1) #>  textshaping   0.3.6   2021-10-13 [1] RSPM (R 4.3.0) #>  tibble        3.2.1   2023-03-20 [1] RSPM (R 4.3.0) #>  tidyr       * 1.3.1   2024-01-24 [1] CRAN (R 4.3.2) #>  tidyselect    1.2.0   2022-10-10 [1] RSPM (R 4.3.0) #>  utf8          1.2.4   2023-10-22 [1] CRAN (R 4.3.1) #>  vctrs         0.6.5   2023-12-01 [1] CRAN (R 4.3.2) #>  xfun          0.42    2024-02-08 [1] CRAN (R 4.3.2) #>  yaml          2.3.8   2023-12-11 [1] CRAN (R 4.3.2) #>  #>  [1] D:/a/_temp/Library #>  [2] C:/R/library"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/data-availability_fri.html","id":"pandoc","dir":"Articles","previous_headings":"5 Session Info","what":"Pandoc","title":"Data Availability Waterworks Friedrichshagen","text":"","code":"#>                                                pandoc_directory pandoc_version #> 1 C:/HOSTED~1/windows/pandoc/31F387~1.11/x64/PANDOC~1.11/pandoc         3.1.11"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/emshoff91.html","id":"install-r-packages","dir":"Articles","previous_headings":"","what":"1 Install R packages","title":"Emshoff 91","text":"","code":"if (! require(\"remotes\")) {   install.packages(\"remotes\", repos = \"https://cloud.r-project.org\") }  remotes::install_github(\"kwb-r/kwb.geosalz\", dependencies = TRUE)"},{"path":[]},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/emshoff91.html","id":"define-paths","dir":"Articles","previous_headings":"2 Setup the project","what":"2.1 Define paths","title":"Emshoff 91","text":"","code":"# Define paths and resolve placeholders paths <- kwb.utils::resolve(list(   servername = Sys.getenv(\"servername\"),   project = \"geosalz\",    processing_dir = \"//<servername>/processing/<project>\",   ods_dir = \"<processing_dir>/archiv/precleaned-data/emshoff91/converted_ods\",    version = \"0.9.0\",   export_xlsx_name = \"emshoff91_v<version>.xlsx\",   export_xlsx_dir = \"<processing_dir>/archiv/cleaned-data\",   export_xlsx_path = \"<export_xlsx_dir>/<export_xlsx_name>\" ))  #paths <- kwb.utils::resolve(paths, root = \"C:/projects\")"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/emshoff91.html","id":"data-import","dir":"Articles","previous_headings":"","what":"3 Data import","title":"Emshoff 91","text":"","code":"emshoff91_import <- kwb.geosalz::create_emshoff91_import(ods_dir = paths$ods_dir)  emshoff91_list <- kwb.geosalz::read_multiple_emshoff91_ods(emshoff91_import)  emshoff91_df <- kwb.geosalz::emshoff91_list_to_df(emshoff91_list)  emshoff91_df_remapped <- kwb.geosalz::emshoff91_remap_values(emshoff91_df)  emshoff91_df_remapped <- emshoff91_import %>%     dplyr::right_join(     emshoff91_df_remapped,     by = \"ods_names_clean\"   ) %>%    dplyr::mutate(     datum = as.Date(sprintf(\"19%s\",.data$datum), format = \"%Y/%m/%d\"),     rohr = stringr::str_replace(.data$rohr, \"^0\", \"O\"))  messstelle_split <- stringr::str_split_fixed(   emshoff91_df_remapped$messstelle,    pattern = \"\\\\s{1,9}\",   n = 3 ) %>%    as.data.frame()  names(messstelle_split) <- c(\"objekt\", \"bhrgs_nr-jahr\", \"rohr\")    messstelle_split <- messstelle_split %>%    tibble::as_tibble() %>%    tidyr::separate(     col = \"bhrgs_nr-jahr\",      into = c(\"bhrgs_nr\", \"jahr\"),     sep = \"/\",     remove = FALSE   ) %>%    dplyr::mutate(     rohr = stringr::str_replace(.data$rohr, \"^0\", \"O\"),      ms = kwb.utils::multiSubstitute(       messstelle_split$objekt,       replacements = list(         \"GF|F-Gal.\" = \"Gal_F\",         \"GE|E-Gal\" = \"Gal_E\",         \"GI|I-Gal.\" = \"Gal_I\",         \"GG|G-Gal.|G-Gal\" = \"Gal_G\",         \"GK|K-Gal.\" = \"Gal_K\",         \"^Go$\" = \"Gal_O\",         \"GH|H-Gal.\" = \"Gal_H\",          \"GO\" = \"Gal_O\",         \"GL|L-Gal.\" = \"Gal_L\",          \"GM|M-Gal.\" = \"Gal_M\",         \",,\" = \",\"       )     )   )   messstelle_split2 <- messstelle_split$ms %>%   stringr::str_split_fixed(pattern = \",\", n = 2) %>%     as.data.frame()  names(messstelle_split2) <- c(\"brunnen_galerie\", \"brunnen_id\")  messstelle_split2 <- messstelle_split2 %>%    dplyr::mutate(     brunnen_id = stringr::str_remove(.data$brunnen_id, pattern = \"^Br\")   )  ms_split <- dplyr::bind_cols(messstelle_split, messstelle_split2)  ms_split  samples_per_moni_id <- emshoff91_df_remapped %>%     dplyr::count(.data$messstelle)   samples_per_moni_id_master <- emshoff91_df_remapped %>%     dplyr::count(     .data$messstelle,      .data$rohr,     .data$fi_mi,      .data$strat,     .data$progr   )"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/emshoff91.html","id":"export-to-excel","dir":"Articles","previous_headings":"3 Data import","what":"4 Export to Excel","title":"Emshoff 91","text":"","code":"openxlsx::write.xlsx(   list(     samples_per_moni_id = samples_per_moni_id,      samples_per_moni_id_master = samples_per_moni_id_master,     data = emshoff91_df_remapped   ),   file = paths$export_xlsx_path,   overwrite = TRUE )"},{"path":[]},{"path":[]},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/emshoff91.html","id":"packages","dir":"Articles","previous_headings":"5 Session Info","what":"Packages","title":"Emshoff 91","text":"","code":"#>  package     * version date (UTC) lib source #>  bslib         0.6.1   2023-11-28 [1] CRAN (R 4.3.2) #>  cachem        1.0.8   2023-05-01 [1] RSPM (R 4.3.0) #>  cli           3.6.2   2023-12-11 [1] CRAN (R 4.3.2) #>  desc          1.4.2   2022-09-08 [1] RSPM (R 4.3.0) #>  digest        0.6.34  2024-01-11 [1] CRAN (R 4.3.2) #>  dplyr       * 1.1.4   2023-11-17 [1] CRAN (R 4.3.2) #>  evaluate      0.23    2023-11-01 [1] CRAN (R 4.3.2) #>  fansi         1.0.6   2023-12-08 [1] CRAN (R 4.3.2) #>  fastmap       1.1.1   2023-02-24 [1] RSPM (R 4.3.0) #>  fs            1.6.3   2023-07-20 [1] RSPM (R 4.3.0) #>  generics      0.1.3   2022-07-05 [1] RSPM (R 4.3.0) #>  glue          1.7.0   2024-01-09 [1] CRAN (R 4.3.2) #>  htmltools     0.5.7   2023-11-03 [1] CRAN (R 4.3.2) #>  jquerylib     0.1.4   2021-04-26 [1] RSPM (R 4.3.0) #>  jsonlite      1.8.8   2023-12-04 [1] CRAN (R 4.3.2) #>  knitr         1.45    2023-10-30 [1] CRAN (R 4.3.1) #>  kwb.utils     0.14.1  2023-09-23 [1] Github (kwb-r/kwb.utils@0930eae) #>  lifecycle     1.0.4   2023-11-07 [1] CRAN (R 4.3.2) #>  magrittr      2.0.3   2022-03-30 [1] RSPM (R 4.3.0) #>  memoise       2.0.1   2021-11-26 [1] RSPM (R 4.3.0) #>  pillar        1.9.0   2023-03-22 [1] RSPM (R 4.3.0) #>  pkgconfig     2.0.3   2019-09-22 [1] RSPM (R 4.3.0) #>  pkgdown       2.0.7   2022-12-14 [1] RSPM (R 4.3.0) #>  purrr         1.0.2   2023-08-10 [1] RSPM (R 4.3.0) #>  R6            2.5.1   2021-08-19 [1] RSPM (R 4.3.0) #>  ragg          1.2.5   2023-01-12 [1] RSPM (R 4.3.0) #>  rlang         1.1.3   2024-01-10 [1] CRAN (R 4.3.2) #>  rmarkdown     2.25    2023-09-18 [1] RSPM (R 4.3.0) #>  rprojroot     2.0.3   2022-04-02 [1] RSPM (R 4.3.0) #>  sass          0.4.8   2023-12-06 [1] CRAN (R 4.3.2) #>  sessioninfo   1.2.2   2021-12-06 [1] RSPM (R 4.3.0) #>  stringi       1.8.3   2023-12-11 [1] CRAN (R 4.3.2) #>  stringr       1.5.1   2023-11-14 [1] CRAN (R 4.3.2) #>  systemfonts   1.0.5   2023-10-09 [1] CRAN (R 4.3.1) #>  textshaping   0.3.6   2021-10-13 [1] RSPM (R 4.3.0) #>  tibble        3.2.1   2023-03-20 [1] RSPM (R 4.3.0) #>  tidyr       * 1.3.1   2024-01-24 [1] CRAN (R 4.3.2) #>  tidyselect    1.2.0   2022-10-10 [1] RSPM (R 4.3.0) #>  utf8          1.2.4   2023-10-22 [1] CRAN (R 4.3.1) #>  vctrs         0.6.5   2023-12-01 [1] CRAN (R 4.3.2) #>  xfun          0.42    2024-02-08 [1] CRAN (R 4.3.2) #>  yaml          2.3.8   2023-12-11 [1] CRAN (R 4.3.2) #>  #>  [1] D:/a/_temp/Library #>  [2] C:/R/library"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/emshoff91.html","id":"pandoc","dir":"Articles","previous_headings":"5 Session Info > Packages","what":"Pandoc","title":"Emshoff 91","text":"","code":"#>                                                pandoc_directory pandoc_version #> 1 C:/HOSTED~1/windows/pandoc/31F387~1.11/x64/PANDOC~1.11/pandoc         3.1.11"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/hydrochemistry.html","id":"install-r-packages","dir":"Articles","previous_headings":"","what":"1 Install R packages","title":"Hydrochemistry","text":"","code":"if (! require(\"remotes\")) {   install.packages(\"remotes\", repos = \"https://cloud.r-project.org\") }  remotes::install_github(\"kwb-r/kwb.geosalz\", dependencies = TRUE)"},{"path":[]},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/hydrochemistry.html","id":"define-paths","dir":"Articles","previous_headings":"2 Setup the project","what":"2.1 Define paths","title":"Hydrochemistry","text":"","code":"# Define paths and resolve placeholders paths_list <- list(   servername = Sys.getenv(\"servername\"),   root_server = \"//<servername>/projekte$/GRW_Department/PROJECTS\",   project = \"geosalz\",   root_project = \"<root_server>/<project>\",   monitoring = \"<root_project>/Work-packages/AP2_Monitoring\",   samples_bwb_dir = \"<monitoring>/Beprobung\",   version = \"1.12\",   samples_bwb = \"<samples_bwb_dir>/Hydrochemie_Gesamt_Geosalz_v<version>.xlsx\",   master_data = \"<samples_bwb>\",   isotopes_dir =  \"<monitoring>/Isotope/data\",   isotopes = \"<isotopes_dir>/Isotope.csv\",   phreeqc_dir = \"<samples_bwb_dir>/phreeqc\",   phreeqc_txt = \"<phreeqc_dir>/phreeqc_output_v%s.txt\",   phreeqc_xlsx = \"<phreeqc_dir>/phreeqc_output_v%s.xlsx\" )  paths <- kwb.utils::resolve(paths_list) #paths <- kwb.utils::resolve(paths, root = \"C:/projects\")"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/hydrochemistry.html","id":"data-import","dir":"Articles","previous_headings":"","what":"3 Data import","title":"Hydrochemistry","text":"","code":"master_data <- kwb.geosalz::read_master_data(paths$master_data)  lab_bwb <- kwb.geosalz::read_lab_bwb(paths$samples_bwb, sheet = 'phreeqc_analysen')  lab_ufz <- kwb.geosalz::read_isotopes(paths$isotopes)  lab_data <- lab_bwb %>%    dplyr::mutate(probe_nr = as.character(.data$probe_nr)) %>%   dplyr::bind_rows(     lab_ufz %>%         dplyr::mutate(par_val_org = as.character(.data$par_val_org))   )  str(lab_data)  lab_data_master <- dplyr::left_join(lab_data, master_data, by = \"messstelle\")  str(lab_data_master)"},{"path":[]},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/hydrochemistry.html","id":"prepare-phreeqc-input-file","dir":"Articles","previous_headings":"4 PhreeqC","what":"4.1 Prepare PHREEQC Input File","title":"Hydrochemistry","text":"Content solutions_input shown :","code":"phreeqc_input <- kwb.geosalz::get_phreeqc_data(lab_data_master) phreeqc_input  phreeqc_input_wide <- kwb.geosalz::convert_phreeqc_input_to_wide(phreeqc_input) phreeqc_input_wide   solutions_input <-  kwb.geosalz::prepare_phreeqc_input(   phreeqc_input,   title = sprintf(\"Based on '%s'\", paths$samples_bwb) )"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/hydrochemistry.html","id":"run-phreeqc","dir":"Articles","previous_headings":"4 PhreeqC","what":"4.2 Run PHREEQC","title":"Hydrochemistry","text":"content phreeqc_output","code":"fs::dir_create(paths$phreeqc_dir)  ### Load PHREEQC database \"phreeqc.dat\" phreeqc::phrLoadDatabaseString(phreeqc::phreeqc.dat)  ### Capture PHREEQC output normally sent to output file into a buffer phreeqc::phrSetOutputStringsOn(TRUE)  ## Run PHREEQC with \"solutions_input\" phreeqc::phrRunString(input = solutions_input)  ### Retrieves the phreeqc output as a character vector phreeqc_output <- phreeqc::phrGetOutputStrings() writeLines(phreeqc_output, paths$phreeqc_txt)"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/hydrochemistry.html","id":"get-results","dir":"Articles","previous_headings":"4 PhreeqC","what":"4.3 Get Results","title":"Hydrochemistry","text":"","code":"sims <- geosalz.phreeqc::read_simulations(phreeqc_output) str(sims)  sims_list <- geosalz.phreeqc::convert_simulations_to_list(sims) str(sims_list)  n_components <- length(names(sims_list))  masters_lab <- lab_data %>%    dplyr::count(     .data$probe_nr,     .data$probenahme_datum,      .data$messstelle   ) %>%    dplyr::select(- .data$n) %>%    dplyr::left_join(master_data)  sims_list_master <- stats::setNames(      lapply(seq_len(n_components), function(i) {          if (i %in% 1:2) {              sims_list[[i]]            } else {              dplyr::left_join(         sims_list[[i]],         masters_lab,         by = c(\"solution_name\" = \"probe_nr\")       )     }   }),    names(sims_list) )  # View(sims_list_master$solution_composition) # View(sims_list_master$description_of_solution) # View(sims_list_master$redox_couples) # View(sims_list_master$distribution_of_species) # View(sims_list_master$saturation_indices)"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/hydrochemistry.html","id":"export-to-excel","dir":"Articles","previous_headings":"4 PhreeqC","what":"5 Export to Excel","title":"Hydrochemistry","text":"","code":"export_data <- c(   list(     \"master_data\" = master_data,      \"lab_bwb\" = lab_bwb,     \"lab_ufz\" = lab_ufz,     \"phreeqc_input\" = phreeqc_input_wide   ),   sims_list )  openxlsx::write.xlsx(   x = export_data,   file = paths$phreeqc_xlsx,   overwrite = TRUE )"},{"path":[]},{"path":[]},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/hydrochemistry.html","id":"packages","dir":"Articles","previous_headings":"6 Session Info","what":"Packages","title":"Hydrochemistry","text":"","code":"#>  package     * version date (UTC) lib source #>  bslib         0.6.1   2023-11-28 [1] CRAN (R 4.3.2) #>  cachem        1.0.8   2023-05-01 [1] RSPM (R 4.3.0) #>  cli           3.6.2   2023-12-11 [1] CRAN (R 4.3.2) #>  desc          1.4.2   2022-09-08 [1] RSPM (R 4.3.0) #>  digest        0.6.34  2024-01-11 [1] CRAN (R 4.3.2) #>  dplyr       * 1.1.4   2023-11-17 [1] CRAN (R 4.3.2) #>  evaluate      0.23    2023-11-01 [1] CRAN (R 4.3.2) #>  fansi         1.0.6   2023-12-08 [1] CRAN (R 4.3.2) #>  fastmap       1.1.1   2023-02-24 [1] RSPM (R 4.3.0) #>  fs            1.6.3   2023-07-20 [1] RSPM (R 4.3.0) #>  generics      0.1.3   2022-07-05 [1] RSPM (R 4.3.0) #>  glue          1.7.0   2024-01-09 [1] CRAN (R 4.3.2) #>  htmltools     0.5.7   2023-11-03 [1] CRAN (R 4.3.2) #>  jquerylib     0.1.4   2021-04-26 [1] RSPM (R 4.3.0) #>  jsonlite      1.8.8   2023-12-04 [1] CRAN (R 4.3.2) #>  knitr         1.45    2023-10-30 [1] CRAN (R 4.3.1) #>  kwb.utils     0.14.1  2023-09-23 [1] Github (kwb-r/kwb.utils@0930eae) #>  lifecycle     1.0.4   2023-11-07 [1] CRAN (R 4.3.2) #>  magrittr      2.0.3   2022-03-30 [1] RSPM (R 4.3.0) #>  memoise       2.0.1   2021-11-26 [1] RSPM (R 4.3.0) #>  pillar        1.9.0   2023-03-22 [1] RSPM (R 4.3.0) #>  pkgconfig     2.0.3   2019-09-22 [1] RSPM (R 4.3.0) #>  pkgdown       2.0.7   2022-12-14 [1] RSPM (R 4.3.0) #>  purrr         1.0.2   2023-08-10 [1] RSPM (R 4.3.0) #>  R6            2.5.1   2021-08-19 [1] RSPM (R 4.3.0) #>  ragg          1.2.5   2023-01-12 [1] RSPM (R 4.3.0) #>  rlang         1.1.3   2024-01-10 [1] CRAN (R 4.3.2) #>  rmarkdown     2.25    2023-09-18 [1] RSPM (R 4.3.0) #>  rprojroot     2.0.3   2022-04-02 [1] RSPM (R 4.3.0) #>  sass          0.4.8   2023-12-06 [1] CRAN (R 4.3.2) #>  sessioninfo   1.2.2   2021-12-06 [1] RSPM (R 4.3.0) #>  stringi       1.8.3   2023-12-11 [1] CRAN (R 4.3.2) #>  stringr       1.5.1   2023-11-14 [1] CRAN (R 4.3.2) #>  systemfonts   1.0.5   2023-10-09 [1] CRAN (R 4.3.1) #>  textshaping   0.3.6   2021-10-13 [1] RSPM (R 4.3.0) #>  tibble        3.2.1   2023-03-20 [1] RSPM (R 4.3.0) #>  tidyr       * 1.3.1   2024-01-24 [1] CRAN (R 4.3.2) #>  tidyselect    1.2.0   2022-10-10 [1] RSPM (R 4.3.0) #>  utf8          1.2.4   2023-10-22 [1] CRAN (R 4.3.1) #>  vctrs         0.6.5   2023-12-01 [1] CRAN (R 4.3.2) #>  xfun          0.42    2024-02-08 [1] CRAN (R 4.3.2) #>  yaml          2.3.8   2023-12-11 [1] CRAN (R 4.3.2) #>  #>  [1] D:/a/_temp/Library #>  [2] C:/R/library"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/hydrochemistry.html","id":"pandoc","dir":"Articles","previous_headings":"6 Session Info > Packages","what":"Pandoc","title":"Hydrochemistry","text":"","code":"#>                                                pandoc_directory pandoc_version #> 1 C:/HOSTED~1/windows/pandoc/31F387~1.11/x64/PANDOC~1.11/pandoc         3.1.11"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/measurement-chains.html","id":"background","dir":"Articles","previous_headings":"","what":"Background","title":"Measurement Chains","text":"One measurement chain consists six sensors placed one production well, different filter depths. total, three measurement chains installed three different production wells. Table 1 lists individual sensors. number sensor within well given column sensor_endnummer. identifier production well sensor located given column brunnen_nummer. sensor (type: WLF05, TODO: add-link--factsheet--kwb-cloud) measures two parameters following characteristics: measurement range: 0 - 20 mS measurement range detection: automatic typical accuracy: +/- 1.5 % measurement value measurement range: 0 - 50 degree Celsius measurement resolution: 0.1 Kelvin typical accuracy: <= 0.1 Kelvin maximum temporal resolution sensor can provide ‚Äúevery second‚Äù. Within GeoSalz project, measurements taken every 5 minutes. sufficient detect potential salinity shifts caused changes pumping regime.","code":""},{"path":[]},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/measurement-chains.html","id":"define-paths","dir":"Articles","previous_headings":"Data Management","what":"Define Paths","title":"Measurement Chains","text":"","code":"# Define paths to directories, using <placeholder> replacements paths <- kwb.utils::resolve(list(      # Local temporary directory   local_dir = kwb.geosalz:::temp_dir(),      # Target directory for downloaded measurement chain files (.csv)   download_dir = \"<local_dir>/download\",      # Local directory for aggregated data (.csv and .zip)   export_dir = \"<local_dir>/export\",      # KWB cloud directory to which data in \"export_dir\" is uploaded   upload_dir = \"projects/GeoSalz/Monitoring/messketten\" )) #> The directory \"C:\\Users\\RUNNER~1\\AppData\\Local\\Temp/R_kwb.geosalz\" was created.  # Print all paths paths #> $local_dir #> [1] \"C:\\\\Users\\\\RUNNER~1\\\\AppData\\\\Local\\\\Temp/R_kwb.geosalz\" #>  #> $download_dir #> [1] \"C:\\\\Users\\\\RUNNER~1\\\\AppData\\\\Local\\\\Temp/R_kwb.geosalz/download\" #>  #> $export_dir #> [1] \"C:\\\\Users\\\\RUNNER~1\\\\AppData\\\\Local\\\\Temp/R_kwb.geosalz/export\" #>  #> $upload_dir #> [1] \"projects/GeoSalz/Monitoring/messketten\""},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/measurement-chains.html","id":"define-sftp-login","dir":"Articles","previous_headings":"Data Management","what":"Define SFTP Login","title":"Measurement Chains","text":"Run usethis::edit_r_environ() edit .Renviron file. file defines environment variables made accessible R session. Add following three rows, defining three environment variables, file. environment variables required log SFTP server input data downloaded. Replace placeholders <sftp_url>, <sftp_username>, <sftp_userpassword> URL, user name, password, respectively, required get access SFTP server. Save .Renviron file restart R session (e.g.¬†‚ÄúSession/Restart R‚Äù menu RStudio) make environment variables available R. case SFTP login credentials correct, code work. downloads measurement chains data (.e.¬†parameters electrical conductivity temperature) SFTP server user-defined directory local device.","code":"MESSKETTEN_SERVER=<sftp_url> MESSKETTEN_USER=<sftp_username> MESSKETTEN_PASSWORD=<sftp_userpassword>"},{"path":[]},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/measurement-chains.html","id":"what-files-are-available-on-the-sftp-server","dir":"Articles","previous_headings":"Data Management > Data Download","what":"What files are available on the SFTP server?","title":"Measurement Chains","text":"","code":"# Metadata of measurement chains (see also Table 1 above) metadata <- kwb.geosalz::get_measurementchains_metadata() str(metadata) #> spc_tbl_ [18 √ó 10] (S3: spec_tbl_df/tbl_df/tbl/data.frame) #>  $ galerie               : chr [1:18] \"K\" \"K\" \"K\" \"K\" ... #>  $ brunnen_nummer        : int [1:18] 9 9 9 9 9 9 10 10 10 10 ... #>  $ dn                    : int [1:18] 400 400 400 400 400 400 600 600 600 600 ... #>  $ einbau_pumpe          : chr [1:18] \"√ºber Filter\" \"√ºber Filter\" \"√ºber Filter\" \"√ºber Filter\" ... #>  $ einbau_messkette      : chr [1:18] \"unter Pumpe\" \"unter Pumpe\" \"unter Pumpe\" \"unter Pumpe\" ... #>  $ filteroberkante_muGOK : num [1:18] 21 21 21 21 21 21 11 11 11 11 ... #>  $ filterunterkante_muGOK: num [1:18] 27 27 27 27 27 27 18 18 18 18 ... #>  $ sensor_id             : int [1:18] 4182018 4182017 4182016 4182015 4182014 4182013 4182006 4182005 4182004 4182003 ... #>  $ sensor_endnummer      : int [1:18] 8 7 6 5 4 3 6 5 4 3 ... #>  $ einbau_sensor_muGOK   : num [1:18] 21.5 22.5 23.5 24.5 25.5 26.5 11.5 12.7 13.9 15.1 ... #>  - attr(*, \"spec\")= #>   .. cols( #>   ..   galerie = col_character(), #>   ..   brunnen_nummer = col_integer(), #>   ..   dn = col_integer(), #>   ..   einbau_pumpe = col_character(), #>   ..   einbau_messkette = col_character(), #>   ..   filteroberkante_muGOK = col_double(), #>   ..   filterunterkante_muGOK = col_double(), #>   ..   sensor_id = col_integer(), #>   ..   sensor_endnummer = col_integer(), #>   ..   einbau_sensor_muGOK = col_double() #>   .. ) #>  - attr(*, \"problems\")=<externalptr>  # Information on available measurement chain files on SFTP server mc_files <- kwb.geosalz::get_measurementchains_files()  str(mc_files) #> 'data.frame':    8947 obs. of  16 variables: #>  $ rights          : chr  \"-rw-r--r--\" \"-rw-r--r--\" \"-rw-r--r--\" \"-rw-r--r--\" ... #>  $ links           : chr  \"1\" \"1\" \"1\" \"1\" ... #>  $ ownername       : chr  \"1011\" \"1011\" \"1011\" \"1011\" ... #>  $ ownergroup      : chr  \"1002\" \"1002\" \"1002\" \"1002\" ... #>  $ filesize        : chr  \"4559\" \"4559\" \"4559\" \"4559\" ... #>  $ t1              : chr  \"Oct\" \"Oct\" \"Oct\" \"Oct\" ... #>  $ t2              : chr  \"24\" \"24\" \"24\" \"25\" ... #>  $ t3              : chr  \"2022\" \"2022\" \"2022\" \"2022\" ... #>  $ sftp_path       : chr  \"K09/4182013-2022-10-22-0606.csv\" \"K09/4182013-2022-10-23-0606.csv\" \"K09/4182013-2022-10-24-0606.csv\" \"K09/4182013-2022-10-25-0606.csv\" ... #>  $ type            : chr  \"file\" \"file\" \"file\" \"file\" ... #>  $ galerie         : chr  \"K\" \"K\" \"K\" \"K\" ... #>  $ brunnen_nummer  : int  9 9 9 9 9 9 9 9 9 9 ... #>  $ prefix          : chr  \"\" \"\" \"\" \"\" ... #>  $ sensor_id       : int  4182013 4182013 4182013 4182013 4182013 4182013 4182013 4182013 4182013 4182013 ... #>  $ sensor_endnummer: int  3 3 3 3 3 3 3 3 3 3 ... #>  $ datum_uhrzeit   : POSIXct, format: \"2022-10-22 06:06:00\" \"2022-10-23 06:06:00\" ... head(mc_files) #>       rights links ownername ownergroup filesize  t1 t2   t3 #> 1 -rw-r--r--     1      1011       1002     4559 Oct 24 2022 #> 2 -rw-r--r--     1      1011       1002     4559 Oct 24 2022 #> 3 -rw-r--r--     1      1011       1002     4559 Oct 24 2022 #> 4 -rw-r--r--     1      1011       1002     4559 Oct 25 2022 #> 5 -rw-r--r--     1      1011       1002     4559 Oct 26 2022 #> 6 -rw-r--r--     1      1011       1002     4559 Oct 27 2022 #>                         sftp_path type galerie brunnen_nummer prefix sensor_id #> 1 K09/4182013-2022-10-22-0606.csv file       K              9          4182013 #> 2 K09/4182013-2022-10-23-0606.csv file       K              9          4182013 #> 3 K09/4182013-2022-10-24-0606.csv file       K              9          4182013 #> 4 K09/4182013-2022-10-25-0606.csv file       K              9          4182013 #> 5 K09/4182013-2022-10-26-0606.csv file       K              9          4182013 #> 6 K09/4182013-2022-10-27-0606.csv file       K              9          4182013 #>   sensor_endnummer       datum_uhrzeit #> 1                3 2022-10-22 06:06:00 #> 2                3 2022-10-23 06:06:00 #> 3                3 2022-10-24 06:06:00 #> 4                3 2022-10-25 06:06:00 #> 5                3 2022-10-26 06:06:00 #> 6                3 2022-10-27 06:06:00  # All paths to files on the SFTP server all_paths <- kwb.utils::selectColumns(mc_files, \"sftp_path\")"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/measurement-chains.html","id":"what-data-are-already-available-on-the-nextcloud-server","dir":"Articles","previous_headings":"Data Management > Data Download","what":"What data are already available on the Nextcloud server?","title":"Measurement Chains","text":"","code":"# Download existing data from the Nextcloud server. NULL is returned if there is # no file \"mc_data.zip\" in the Nextcloud folder  # \"projects/GeoSalz/Monitoring/messketten\" old_data <- kwb.geosalz::get_measurement_chain_data_on_cloud() #> The directory \"~/../Downloads/nextcloud_36c52482155\" was created. #> Downloading remote.php/dav/files/hsonne/projects/GeoSalz/Monitoring/messketten/mc_data.zip ... ok. (1.63 secs) #old_data <- NULL"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/measurement-chains.html","id":"what-files-need-to-be-downloaded-from-the-sftp-server","dir":"Articles","previous_headings":"Data Management > Data Download","what":"What files need to be downloaded from the SFTP server?","title":"Measurement Chains","text":"","code":"# Determine the SFTP paths of the files to be downloaded. Download all available # files if there was no data on the Nextcloud yet. Otherwise, download only # those files that have been added to the SFTP server since when this script was # run the last time. new_paths <- if (is.null(old_data)) {      all_paths    } else {      # Get SFTP paths from which data were originally retrieved   old_paths <- unique(kwb.utils::selectColumns(old_data, \"file\"))      # Determine the paths to the new files that need to be downloaded   setdiff(all_paths, old_paths) }"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/measurement-chains.html","id":"download-the-new-files-from-the-sftp-server","dir":"Articles","previous_headings":"Data Management > Data Download","what":"Download the new files from the SFTP server","title":"Measurement Chains","text":"","code":"# If there are new files to download, download them. csv_files <- if (length(new_paths)) {      # Download only the new measurement chain files (.csv) from the SFTP server   kwb.geosalz::download_measurementchains_data(     sftp_paths = new_paths,     target_directory = paths$download_dir,     debug = TRUE   )    } # else NULL implicitly #> The directory \"C:\\Users\\RUNNER~1\\AppData\\Local\\Temp/R_kwb.geosalz/download\" was created. #> Download 18 measurement chains files (using 3 CPU cores) to C:\\Users\\RUNNER~1\\AppData\\Local\\Temp/R_kwb.geosalz/download ... ok. (23.95 secs)  str(csv_files) #>  chr [1:18] \"C:\\\\Users\\\\RUNNER~1\\\\AppData\\\\Local\\\\Temp/R_kwb.geosalz/download/K09/4182013-2024-02-29-0507.csv\" ..."},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/measurement-chains.html","id":"data-import","dir":"Articles","previous_headings":"Data Management","what":"Data Import","title":"Measurement Chains","text":"following code imports downloaded measurement chains files (.csv) R: following datasets imported R already available R: cover time period 2022-09-27 11:00:00 2024-02-28 23:00:00 total 156024 samples.","code":"# Set the current data to the old data (may be NULL) mc_data <- old_data  # If new files have been downloaded, import them into R if (length(csv_files)) {      # Import csv files using multiple CPU cores   new_data <- kwb.geosalz::read_measurementchains_data(     csv_files,     run_parallel = TRUE,     debug = TRUE   )      # Combine the new data with the existing data and reorder   mc_data <- mc_data %>%     rbind(new_data) %>%     kwb.geosalz::order_measurement_chain_data() } #> Importing 18 measurement chains files (using 3 CPU cores) ... ok. (2.33 secs)  #> Filtering out 'lab' measurements before '2022-09-27 11:00:00' (installation in K10) ... ok. (0.00 secs) mc_data_stats <- mc_data %>%   kwb.geosalz::get_measurmentchains_data_stats() %>%    dplyr::arrange(     .data$parameter,      dplyr::desc(.data$sensor_id)   )"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/measurement-chains.html","id":"data-export","dir":"Articles","previous_headings":"Data Management","what":"Data Export","title":"Measurement Chains","text":"file size mc_data_20220927-110000TZ+01_20240228-230000TZ+01.csv file 21.1 times larger compared compressing mc_data.zip.","code":"debug <- TRUE  # Export \"mc_data\" to csv file data_csv_path <- kwb.geosalz::write_measurementchains_data(   mc_data,   target_directory = paths$export_dir,   to_zip = FALSE,   debug = debug ) #> Exporting provided dataset 'mc_data' to 'C:/Users/RUNNER~1/AppData/Local/Temp/R_kwb.geosalz/export/mc_data_20220927-110000TZ+01_20240228-230000TZ+01.csv' ... ok. (2.12 secs)  size_data_csv <- fs::file_size(data_csv_path)  # Export \"mc_data\" to zip file (~10x less disk space for test dataset) data_zip_path <- kwb.geosalz::write_measurementchains_data(   mc_data,   target_directory = paths$export_dir,   to_zip = TRUE,   debug = debug ) #> Exporting provided dataset 'mc_data' to 'C:/Users/RUNNER~1/AppData/Local/Temp/R_kwb.geosalz/export/mc_data_20220927-110000TZ+01_20240228-230000TZ+01.csv' ... ok. (2.11 secs)  #> Exporting provided dataset 'mc_data' to 'C:\\Users\\RUNNER~1\\AppData\\Local\\Temp/R_kwb.geosalz/export/mc_data.zip' and delete intermediate 'C:/Users/RUNNER~1/AppData/Local/Temp/R_kwb.geosalz/export/mc_data_20220927-110000TZ+01_20240228-230000TZ+01.csv' ... ok. (0.15 secs)  size_data_zip <- fs::file_size(data_zip_path) size_data_csv / size_data_zip #> 21.1  extract_data_timeperiod <- function(file) {   basename(file) %>%      kwb.utils::replaceFileExtension(\"\") %>%       stringr::str_remove(\"^mc[-|_]data\") }  # Define helper function to write a csv file in a target directory write_csv <- function(df, postfix = \"\", target_dir) {   fs::dir_create(target_dir)   name <- deparse(substitute(df))   file <- file.path(target_dir, paste0(name, postfix,  \".csv\"))   readr::write_csv(df, file)   file }  postfix <- extract_data_timeperiod(data_zip_path) target_dir <- paths$export_dir  # Export data and metadata to csv files stats_path <- write_csv(mc_data_stats, postfix, target_dir) metadata_path <- write_csv(metadata, postfix, target_dir) files_path <- write_csv(mc_files, postfix, target_dir)  # Define function that plots data to a pdf file plot_to_pdf <- function(mc_data, para, target_dir = \".\", debug = TRUE) {      plots <- kwb.geosalz::plot_measurementchains(mc_data, para)      sapply(names(plots), function(name) {     path <-  file.path(target_dir, sprintf(\"mc_data_%s.pdf\", name))     kwb.utils::catAndRun(       sprintf(\"Writting '%s' to '%s'\", name, path),       expr = {         kwb.utils::preparePdf(path, width.cm = 25, height.cm = 15)         on.exit(dev.off())         print(plots[[name]])         path       },        dbg = debug     )   }) }  pdf_files <- c(   plot_to_pdf(mc_data, \"Leitfaehigkeit\", paths$export_dir),    plot_to_pdf(mc_data, \"Temperatur\", paths$export_dir) ) #> Writting 'Leitfaehigkeit_K10' to 'C:\\Users\\RUNNER~1\\AppData\\Local\\Temp/R_kwb.geosalz/export/mc_data_Leitfaehigkeit_K10.pdf' ... #> ok. (1.12 secs)  #> Writting 'Leitfaehigkeit_K13' to 'C:\\Users\\RUNNER~1\\AppData\\Local\\Temp/R_kwb.geosalz/export/mc_data_Leitfaehigkeit_K13.pdf' ... #> ok. (0.78 secs)  #> Writting 'Leitfaehigkeit_K09' to 'C:\\Users\\RUNNER~1\\AppData\\Local\\Temp/R_kwb.geosalz/export/mc_data_Leitfaehigkeit_K09.pdf' ... #> ok. (0.80 secs)  #> Writting 'Temperatur_K10' to 'C:\\Users\\RUNNER~1\\AppData\\Local\\Temp/R_kwb.geosalz/export/mc_data_Temperatur_K10.pdf' ... #> ok. (0.96 secs)  #> Writting 'Temperatur_K13' to 'C:\\Users\\RUNNER~1\\AppData\\Local\\Temp/R_kwb.geosalz/export/mc_data_Temperatur_K13.pdf' ... #> ok. (0.64 secs)  #> Writting 'Temperatur_K09' to 'C:\\Users\\RUNNER~1\\AppData\\Local\\Temp/R_kwb.geosalz/export/mc_data_Temperatur_K09.pdf' ... #> ok. (0.67 secs)  data_zip_path #> [1] \"C:\\\\Users\\\\RUNNER~1\\\\AppData\\\\Local\\\\Temp/R_kwb.geosalz/export/mc_data.zip\""},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/measurement-chains.html","id":"data-upload","dir":"Articles","previous_headings":"Data Management","what":"Data Upload","title":"Measurement Chains","text":"order automate data management process exported data data uploaded restricted shared folder KWB cloud. following environment variables need defined case code run client computer. However, variables defined GitHub actions workflow need locally. Subsequently following code run uploading data:","code":"NEXTCLOUD_URL = \"https://<replace-with-kwb-cloud-url>\" NEXTCLOUD_USER = \"<your-kwb-cloud-username>\" # your username NEXTCLOUD_PASSWORD = \"your-nextcloud-app-password\" ### see details below # List paths of files to upload explicitly upload_files <- kwb.geosalz:::exclude_missing_files(c(   stats_path,    pdf_files,   metadata_path,    files_path,   data_zip_path ))  for (file in upload_files) {      kwb.utils::catAndRun(     messageText = paste(\"Uploading file\", file),     expr = try(kwb.nextcloud::upload_file(       file = file,        target_path = paths$upload_dir     )),     dbg = TRUE   ) } #> Uploading file C:\\Users\\RUNNER~1\\AppData\\Local\\Temp/R_kwb.geosalz/export/mc_data_stats.csv ... Uploading #>   C:\\Users\\RUNNER~1\\AppData\\Local\\Temp/R_kwb.geosalz/export/mc_data_stats.csv #> to #>   projects/GeoSalz/Monitoring/messketten ... ok. (2.64 secs)  #> ok. (3.14 secs)  #> Uploading file C:\\Users\\RUNNER~1\\AppData\\Local\\Temp/R_kwb.geosalz/export/mc_data_Leitfaehigkeit_K10.pdf ... Uploading #>   C:\\Users\\RUNNER~1\\AppData\\Local\\Temp/R_kwb.geosalz/export/mc_data_Leitfaehigkeit_K10.pdf #> to #>   projects/GeoSalz/Monitoring/messketten ... ok. (2.55 secs)  #> ok. (3.00 secs)  #> Uploading file C:\\Users\\RUNNER~1\\AppData\\Local\\Temp/R_kwb.geosalz/export/mc_data_Leitfaehigkeit_K13.pdf ... Uploading #>   C:\\Users\\RUNNER~1\\AppData\\Local\\Temp/R_kwb.geosalz/export/mc_data_Leitfaehigkeit_K13.pdf #> to #>   projects/GeoSalz/Monitoring/messketten ... ok. (1.94 secs)  #> ok. (2.40 secs)  #> Uploading file C:\\Users\\RUNNER~1\\AppData\\Local\\Temp/R_kwb.geosalz/export/mc_data_Leitfaehigkeit_K09.pdf ... Uploading #>   C:\\Users\\RUNNER~1\\AppData\\Local\\Temp/R_kwb.geosalz/export/mc_data_Leitfaehigkeit_K09.pdf #> to #>   projects/GeoSalz/Monitoring/messketten ... ok. (2.05 secs)  #> ok. (2.49 secs)  #> Uploading file C:\\Users\\RUNNER~1\\AppData\\Local\\Temp/R_kwb.geosalz/export/mc_data_Temperatur_K10.pdf ... Uploading #>   C:\\Users\\RUNNER~1\\AppData\\Local\\Temp/R_kwb.geosalz/export/mc_data_Temperatur_K10.pdf #> to #>   projects/GeoSalz/Monitoring/messketten ... ok. (2.21 secs)  #> ok. (2.66 secs)  #> Uploading file C:\\Users\\RUNNER~1\\AppData\\Local\\Temp/R_kwb.geosalz/export/mc_data_Temperatur_K13.pdf ... Uploading #>   C:\\Users\\RUNNER~1\\AppData\\Local\\Temp/R_kwb.geosalz/export/mc_data_Temperatur_K13.pdf #> to #>   projects/GeoSalz/Monitoring/messketten ... ok. (1.75 secs)  #> ok. (2.21 secs)  #> Uploading file C:\\Users\\RUNNER~1\\AppData\\Local\\Temp/R_kwb.geosalz/export/mc_data_Temperatur_K09.pdf ... Uploading #>   C:\\Users\\RUNNER~1\\AppData\\Local\\Temp/R_kwb.geosalz/export/mc_data_Temperatur_K09.pdf #> to #>   projects/GeoSalz/Monitoring/messketten ... ok. (1.73 secs)  #> ok. (2.19 secs)  #> Uploading file C:\\Users\\RUNNER~1\\AppData\\Local\\Temp/R_kwb.geosalz/export/metadata.csv ... Uploading #>   C:\\Users\\RUNNER~1\\AppData\\Local\\Temp/R_kwb.geosalz/export/metadata.csv #> to #>   projects/GeoSalz/Monitoring/messketten ... ok. (1.40 secs)  #> ok. (1.86 secs)  #> Uploading file C:\\Users\\RUNNER~1\\AppData\\Local\\Temp/R_kwb.geosalz/export/mc_files.csv ... Uploading #>   C:\\Users\\RUNNER~1\\AppData\\Local\\Temp/R_kwb.geosalz/export/mc_files.csv #> to #>   projects/GeoSalz/Monitoring/messketten ... ok. (2.35 secs)  #> ok. (2.83 secs)  #> Uploading file C:\\Users\\RUNNER~1\\AppData\\Local\\Temp/R_kwb.geosalz/export/mc_data.zip ... Uploading #>   C:\\Users\\RUNNER~1\\AppData\\Local\\Temp/R_kwb.geosalz/export/mc_data.zip #> to #>   projects/GeoSalz/Monitoring/messketten ... ok. (1.63 secs)  #> ok. (2.08 secs)"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/wasserportal.html","id":"define-helper-functions","dir":"Articles","previous_headings":"","what":"Define Helper Functions","title":"Wasserportal","text":"","code":"library(kwb.geosalz)  add_label <- function(df, columns) {   df %>%     dplyr::mutate(label = wasserportal::columns_to_labels(       data = df,       columns = columns,       fmt = \"<p>%s: %s<\/p>\",       sep = \"\"     )) }  add_interval_label <- function(df) {   add_label(df, c(\"Nummer\", \"start\", \"end\", \"n\", \"interval\")) }  add_waterbody_label <- function(df) {   add_label(df, c(\"Nummer\", \"Gewaesser\", \"Auspraegung\", \"Betreiber\")) }  get_data_stats <- function(df, group_col = \"Messstellennummer\") {   df %>%     dplyr::group_by(.data[[group_col]]) %>%     dplyr::summarise(       start = min(as.Date(.data$Datum)),       end = max(as.Date(.data$Datum)),       period = diff(c(.data$start, .data$end)),       n = dplyr::n(),       interval = round(.data$period / .data$n)     ) }  difftime_to_numeric <- function(df) {   df %>%       dplyr::rename(       period_days = \"period\",        interval_days = \"interval\"     ) %>%      dplyr::mutate(       period_days = as.numeric(.data$period_days),       interval_days = as.numeric(.data$interval_days)     ) }  remove_na_and_geometry <- function(df) {   df %>%     kwb.utils::removeColumns(\"label\") %>%     kwb.utils::removeEmptyColumns(dbg = FALSE) %>%     remove_geometry() }  remove_geometry <- function(df) {   sf::st_geometry(df) <- NULL   df }  write_csv <- function(x, file) {   kwb.utils::catAndRun(     sprintf(\"Writing %s to %s\", deparse(substitute(x)), file),     readr::write_csv2(x, file)   ) }  # Function to create a map create_map <- function(     basemap, data, labels, legend_label, legend_color, circle_color ) {   basemap %>%     leaflet::addCircles(       data = data,       color = circle_color,       opacity = 0.4,       label = lapply(labels, htmltools::HTML)     ) %>%     leaflet::addLegend(       position = \"topright\",       colors = c(\"red\", legend_color),       labels = c(\"SVM Modellgrenze\", legend_label),       title = \"Legende\"     ) }"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/wasserportal.html","id":"initialise-objects","dir":"Articles","previous_headings":"","what":"Initialise objects","title":"Wasserportal","text":"","code":"swl_data_stats_export <- NULL gwl_data_stats_export <- NULL gwq_chloride_data_stats_export <- NULL # Load SVM boundaries and transform coordinate reference system (CRS) svm <- \"extdata/gis/shapefiles/svm_south.shp\" %>%   system.file(package = \"kwb.geosalz\") %>%   sf::st_read() %>%   sf::st_transform(crs = 4326) #> Reading layer `svm_south' from data source  #>   `D:\\a\\_temp\\Library\\kwb.geosalz\\extdata\\gis\\shapefiles\\svm_south.shp'  #>   using driver `ESRI Shapefile' #> Simple feature collection with 1 feature and 2 fields #> Geometry type: POLYGON #> Dimension:     XY #> Bounding box:  xmin: 13.49052 ymin: 52.3341 xmax: 13.75224 ymax: 52.45715 #> Geodetic CRS:  WGS 84  # Print information on the CRS sf::st_crs(svm) #> Coordinate Reference System: #>   User input: EPSG:4326  #>   wkt: #> GEOGCRS[\"WGS 84\", #>     ENSEMBLE[\"World Geodetic System 1984 ensemble\", #>         MEMBER[\"World Geodetic System 1984 (Transit)\"], #>         MEMBER[\"World Geodetic System 1984 (G730)\"], #>         MEMBER[\"World Geodetic System 1984 (G873)\"], #>         MEMBER[\"World Geodetic System 1984 (G1150)\"], #>         MEMBER[\"World Geodetic System 1984 (G1674)\"], #>         MEMBER[\"World Geodetic System 1984 (G1762)\"], #>         MEMBER[\"World Geodetic System 1984 (G2139)\"], #>         ELLIPSOID[\"WGS 84\",6378137,298.257223563, #>             LENGTHUNIT[\"metre\",1]], #>         ENSEMBLEACCURACY[2.0]], #>     PRIMEM[\"Greenwich\",0, #>         ANGLEUNIT[\"degree\",0.0174532925199433]], #>     CS[ellipsoidal,2], #>         AXIS[\"geodetic latitude (Lat)\",north, #>             ORDER[1], #>             ANGLEUNIT[\"degree\",0.0174532925199433]], #>         AXIS[\"geodetic longitude (Lon)\",east, #>             ORDER[2], #>             ANGLEUNIT[\"degree\",0.0174532925199433]], #>     USAGE[ #>         SCOPE[\"Horizontal component of 3D system.\"], #>         AREA[\"World.\"], #>         BBOX[-90,-180,90,180]], #>     ID[\"EPSG\",4326]]  # Function to filter for study area filter_for_study_area <- function(x) {   sf::st_filter(x, y = svm$geometry[svm$name == \"Friedrichshagen\"]) }  # Get information on \"Wasserportal\"-stations  stations <- wasserportal::get_stations() #> Importing 9 station overviews from Wasserportal Berlin ... ok. (10.51 secs)"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/wasserportal.html","id":"download-and-process-surface-water-level-data","dir":"Articles","previous_headings":"","what":"Download and Process Surface Water Level Data","title":"Wasserportal","text":"","code":"try({      swl_master <- wasserportal::get_wasserportal_masters_data(     master_urls = stations$overview_list$surface_water.water_level %>%       dplyr::filter(.data$Betreiber == \"Land Berlin\") %>%       dplyr::pull(.data$stammdaten_link)   )       swl_master_sf <- swl_master %>%     kwb.geosalz::convert_to_sf() %>%     filter_for_study_area() %>%     add_waterbody_label()      swl_master <- swl_master %>%      dplyr::filter(.data$Nummer %in% swl_master_sf$Nummer)       write_csv(swl_master, \"swl_master.csv\")      swl_data_list <- lapply(     X = stats::setNames(nm = swl_master$Nummer),     FUN = wasserportal::read_wasserportal,     from_date = \"1900-01-01\",     variables = \"ows\",      type = \"daily\",     stations_crosstable = stations$crosstable   )      column_level_zero <- \"Pegelnullpunkt_m_NHN\"   key_columns <- c(\"Nummer\", column_level_zero)    swl_data <- stats::setNames(nm = names(swl_data_list)) %>%     lapply(function(name) swl_data_list[[name]][[1]]) %>%      dplyr::bind_rows(.id = \"Messstellennummer\") %>%      dplyr::mutate(Datum = as.Date(.data$Datum, format = \"%d.%m.%Y\")) %>%      dplyr::filter(.data$Tagesmittelwert != -777) %>%      dplyr::rename(       Tagesmittelwert_cm_ueber_Pegelnullpunkt = \"Tagesmittelwert\"     ) %>%      dplyr::left_join(       swl_master[, ..key_columns],       by = c(Messstellennummer = \"Nummer\")     ) %>%       dplyr::mutate(       Tagesmittelwert_Pegelstand_mNN = as.numeric(.data[[column_level_zero]]) +         .data$Tagesmittelwert_cm_ueber_Pegelnullpunkt / 100     ) %>%      kwb.utils::removeColumns(column_level_zero)      write_csv(swl_data, \"swl_data.csv\")      swl_data_stats <- get_data_stats(swl_data)      swl_data_stats_export <- swl_master_sf %>%      remove_na_and_geometry() %>%     dplyr::left_join(       difftime_to_numeric(swl_data_stats),       by = c(\"Nummer\" = \"Messstellennummer\")     )      write_csv(swl_data_stats_export, \"swl_data_stats.csv\") }) #> Importing 63 station metadata from Wasserportal Berlin ... ok. (28.53 secs)  #> Writing swl_master to swl_master.csv ... ok. (0.08 secs)  #> Reading 'NA' for station 5827103 (station_5827103) ... ok. (1.23 secs) #> Warning in warning_not_implemented(\"merge_raw_results_daily()\"): #> merge_raw_results_daily() is not yet implemented. Returning raw data #> Reading 'NA' for station 5827101 (station_5827101) ... ok. (0.89 secs) #> Warning in warning_not_implemented(\"merge_raw_results_daily()\"): #> merge_raw_results_daily() is not yet implemented. Returning raw data #> Reading 'NA' for station 5826702 (station_5826702) ... ok. (0.82 secs) #> Warning in warning_not_implemented(\"merge_raw_results_daily()\"): #> merge_raw_results_daily() is not yet implemented. Returning raw data #> Reading 'NA' for station 5826701 (station_5826701) ... ok. (0.82 secs) #> Warning in warning_not_implemented(\"merge_raw_results_daily()\"): #> merge_raw_results_daily() is not yet implemented. Returning raw data #> Reading 'NA' for station 5862811 (station_5862811) ... ok. (0.69 secs) #> Warning in warning_not_implemented(\"merge_raw_results_daily()\"): #> merge_raw_results_daily() is not yet implemented. Returning raw data #> Writing swl_data to swl_data.csv ... ok. (0.20 secs)  #> Writing swl_data_stats_export to swl_data_stats.csv ... ok. (0.01 secs)"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/wasserportal.html","id":"download-and-process-groundwater-level-data","dir":"Articles","previous_headings":"","what":"Download and Process Groundwater Level Data","title":"Wasserportal","text":"","code":"try({    gwl_master <- jsonlite::fromJSON(     \"https://kwb-r.github.io/wasserportal/stations_gwl_master.json\"   )      gwl_master_sf <- gwl_master %>%     kwb.geosalz::convert_to_sf() %>%     filter_for_study_area()      gwl_master <- gwl_master %>%      dplyr::filter(.data$Nummer %in% gwl_master_sf$Nummer)      write_csv(gwl_master, \"gwl_master.csv\")      gwl_data <- lapply(     X = gwl_master$Nummer,     FUN = wasserportal::read_wasserportal_raw_gw,      stype = \"gwl\"   ) %>%      data.table::rbindlist()      write_csv(gwl_data, \"gwl_data.csv\")      gwl_data_stats <- get_data_stats(gwl_data)       gwl_data_stats_export <- gwl_master_sf %>%      remove_na_and_geometry() %>%     dplyr::left_join(       difftime_to_numeric(gwl_data_stats),       by = c(\"Nummer\" = \"Messstellennummer\")     )      write_csv(gwl_data_stats_export, \"gwl_data_stats.csv\")      gwl_master_stats <- gwl_master %>%     dplyr::left_join(gwl_data_stats, by = c(Nummer = \"Messstellennummer\")) %>%     add_interval_label()    }) #> Writing gwl_master to gwl_master.csv ... ok. (0.01 secs)  #> Writing gwl_data to gwl_data.csv ... ok. (0.53 secs)  #> Writing gwl_data_stats_export to gwl_data_stats.csv ... ok. (0.01 secs)"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/wasserportal.html","id":"download-and-process-groundwater-quality-data","dir":"Articles","previous_headings":"","what":"Download and Process Groundwater Quality Data","title":"Wasserportal","text":"","code":"try({      gwq_master <- jsonlite::fromJSON(     \"https://kwb-r.github.io/wasserportal/stations_gwq_master.json\"   )    gwq_master_sf <- gwq_master %>%     kwb.geosalz::convert_to_sf() %>%     filter_for_study_area()      gwq_master <- gwq_master %>%      dplyr::filter(.data$Nummer %in% gwq_master_sf$Nummer)      write_csv(gwq_master, \"gwq_master.csv\")      gw_master <- gwl_master %>%       dplyr::full_join(gwq_master) %>%      dplyr::mutate(Nummer = as.integer(.data$Nummer)) %>%      dplyr::arrange(.data$Nummer)      write_csv(gw_master, \"gw_master.csv\")      gwq_data <- jsonlite::fromJSON(     \"https://kwb-r.github.io/wasserportal/stations_gwq_data.json\"   ) %>%     dplyr::filter(.data$Messstellennummer %in% gwq_master$Nummer)      write_csv(gwq_data, \"gwq_data.csv\")      gwq_chloride_data <- gwq_data %>%     dplyr::filter(.data$Parameter == \"Chlorid\")      write_csv(gwq_chloride_data, \"gwq_chloride_data.csv\")      gwq_chloride_master <- gwq_master %>%      dplyr::filter(.data$Nummer %in% gwq_chloride_data$Messstellennummer)      write_csv(gwq_chloride_master, \"gwq_chloride_master.csv\")      gwq_chloride_data_stats <- gwq_chloride_data %>%     get_data_stats()      gwq_chloride_data_stats_export <- gwq_chloride_master %>%     kwb.geosalz::convert_to_sf() %>%      remove_na_and_geometry() %>%     dplyr::mutate(Nummer = as.integer(.data$Nummer)) %>%      dplyr::left_join(       difftime_to_numeric(gwq_chloride_data_stats),       by = c(\"Nummer\" = \"Messstellennummer\")     )      write_csv(gwq_chloride_data_stats_export, \"gwq_chloride_data_stats.csv\")      gwq_chloride_master_stats <- gwq_chloride_master %>%     dplyr::mutate(Nummer = as.integer(.data$Nummer)) %>%     dplyr::left_join(       gwq_chloride_data_stats,        by = c(\"Nummer\" = \"Messstellennummer\")     ) %>%     add_interval_label()      write_csv(gwq_chloride_master_stats, \"gwq_chloride_master_stats.csv\") }) #> Writing gwq_master to gwq_master.csv ... ok. (0.01 secs) #> Joining with `by = join_by(Nummer, Bezirk, Betreiber, Auspraegung, #> Grundwasserleiter, Gelaendeoberkante_GOK_m_ue_NHN, Rohroberkante_m_ue_NHN, #> Filteroberkante_m_u_GOK, Filterunterkante_m_u_GOK, Rechtswert_UTM_33_N, #> Hochwert_UTM_33_N)` #> Writing gw_master to gw_master.csv ... ok. (0.01 secs)  #> Writing gwq_data to gwq_data.csv ... ok. (0.15 secs)  #> Writing gwq_chloride_data to gwq_chloride_data.csv ... ok. (0.10 secs)  #> Writing gwq_chloride_master to gwq_chloride_master.csv ... ok. (0.01 secs)  #> Writing gwq_chloride_data_stats_export to gwq_chloride_data_stats.csv ... ok. (0.01 secs)  #> Writing gwq_chloride_master_stats to gwq_chloride_master_stats.csv ... ok. (0.01 secs)"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/wasserportal.html","id":"create-maps","dir":"Articles","previous_headings":"","what":"Create Maps","title":"Wasserportal","text":"","code":"basemap <- svm %>%   leaflet::leaflet() %>%   leaflet::addTiles() %>%   leaflet::addProviderTiles(leaflet::providers$CartoDB.Positron) %>%   leaflet::addPolygons(color = \"red\", fill = FALSE)  swl_map <- try(create_map(   basemap,   data = swl_master_sf,    labels = swl_master_sf$label,   legend_label = \"OW-Stand (Wasserportal)\",   legend_color = \"darkblue\",   circle_color = \"blue\" ))  gwl_map <- try(create_map(   basemap,   data = kwb.geosalz::convert_to_sf(gwl_master_stats),   labels = gwl_master_stats$label,   legend_label = \"GW-Stand (Wasserportal)\",   legend_color = \"blue\",   circle_color = \"blue\" ))  gwq_map <- try(create_map(   basemap,   data = kwb.geosalz::convert_to_sf(gwq_chloride_master_stats),   labels = gwq_chloride_master_stats$label,   legend_label = \"GW-G\\u00FCte (Wasserportal)\",   legend_color = \"orange\",   circle_color = \"orange\" ))  print(swl_map) print(gwl_map) print(gwq_map)"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/wasserportal.html","id":"save-maps","dir":"Articles","previous_headings":"","what":"Save Maps","title":"Wasserportal","text":"Save maps full page view: Links full-page view maps: https://kwb-r.github.io/kwb.geosalz/map_swl.html https://kwb-r.github.io/kwb.geosalz/map_gwl.html https://kwb-r.github.io/kwb.geosalz/map_gwq.html","code":"htmlwidgets::saveWidget(   swl_map,    \"./map_swl.html\",    title = \"SW level\" ) htmlwidgets::saveWidget(   gwl_map,    \"./map_gwl.html\",    title = \"GW level\" ) htmlwidgets::saveWidget(   gwq_map,    \"./map_gwq.html\",    title = \"GW quality (Chloride)\" )"},{"path":[]},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/wasserportal.html","id":"surface-water","dir":"Articles","previous_headings":"Datasets","what":"Surface Water","title":"Wasserportal","text":"https://kwb-r.github.io/kwb.geosalz/swl_master.csv https://kwb-r.github.io/kwb.geosalz/swl_data.csv https://kwb-r.github.io/kwb.geosalz/swl_data_stats.csv","code":""},{"path":[]},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/wasserportal.html","id":"master-data","dir":"Articles","previous_headings":"Datasets > Groundwater","what":"Master Data","title":"Wasserportal","text":"Groundwater Levels Groundwater Levels https://kwb-r.github.io/kwb.geosalz/gw_master.csv","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/wasserportal.html","id":"groundwater-levels","dir":"Articles","previous_headings":"Datasets > Groundwater","what":"Groundwater Levels","title":"Wasserportal","text":"https://kwb-r.github.io/kwb.geosalz/gwl_master.csv https://kwb-r.github.io/kwb.geosalz/gwl_data.csv https://kwb-r.github.io/kwb.geosalz/gwl_data_stats.csv","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/wasserportal.html","id":"groundwater-quality","dir":"Articles","previous_headings":"Datasets > Groundwater","what":"Groundwater Quality","title":"Wasserportal","text":"https://kwb-r.github.io/kwb.geosalz/gwq_master.csv https://kwb-r.github.io/kwb.geosalz/gwq_data.csv https://kwb-r.github.io/kwb.geosalz/gwq_chloride_master.csv https://kwb-r.github.io/kwb.geosalz/gwq_chloride_master_stats.csv https://kwb-r.github.io/kwb.geosalz/gwq_chloride_data.csv","code":""},{"path":[]},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/wasserportal.html","id":"sw-levels","dir":"Articles","previous_headings":"Datasets > Tables","what":"SW Levels","title":"Wasserportal","text":"","code":"DT::datatable(swl_data_stats_export)"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/wasserportal.html","id":"gw-levels","dir":"Articles","previous_headings":"Datasets > Tables","what":"GW Levels","title":"Wasserportal","text":"stats groundwater levels","code":"DT::datatable(gwl_data_stats_export)"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/wasserportal.html","id":"gw-quality","dir":"Articles","previous_headings":"Datasets > Tables","what":"GW Quality","title":"Wasserportal","text":"stats Chloride","code":"DT::datatable(gwq_chloride_data_stats_export)"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/workflow.html","id":"install-r-packages","dir":"Articles","previous_headings":"","what":"1 Install R packages","title":"Workflow","text":"","code":"if (! require(\"remotes\")) {   install.packages(\"remotes\", repos = \"https://cloud.r-project.org\") }  remotes::install_github(\"kwb-r/kwb.geosalz\", dependencies = TRUE)"},{"path":[]},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/workflow.html","id":"define-paths","dir":"Articles","previous_headings":"2 Setup the project","what":"2.1 Define paths","title":"Workflow","text":"","code":"# Define paths and resolve placeholders paths <- list(   servername = Sys.getenv(\"servername\"),   root_server = \"//<servername>/processing\",   project = \"geosalz\",   task = \"labor\",   processing = \"<root>/<project>/<task>\",   input_dir = \"<processing>/precleaned-data/v0.2\",   input_dir_meta = \"<input_dir>/META\",   export_dir = \"<processing>/precleaned-data/v0.3\",   export_dir_meta = \"<export_dir>/META\",   cleaned_data_dir = \"<processing>/cleaned-data\",   figures_dir = \"<processing>/figures\",   foerdermengen = \"<export_dir>/2018-04-27 Rohwasser Bericht - Galerief√∂rdermengen.xlsx\",   parameters = \"<export_dir_meta>/2018-06-01 Lab Parameter.xlsx\",   lookup_para = \"<export_dir_meta>/lookup_para.csv\",   sites = \"<export_dir_meta>/Info-Altdaten.xlsx\" )  paths <- kwb.utils::resolve(paths, root = \"root_server\") #paths <- kwb.utils::resolve(paths, root = \"C:/projects\")"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/workflow.html","id":"check-input-directory","dir":"Articles","previous_headings":"2 Setup the project","what":"2.2 Check input directory","title":"Workflow","text":"Check input directory selected exists:","code":"# Check if input directory exists input_dir <- kwb.utils::safePath(kwb.utils::selectElements(paths, \"input_dir\"))"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/workflow.html","id":"check-export-directory","dir":"Articles","previous_headings":"2 Setup the project","what":"2.3 Check export directory","title":"Workflow","text":"Check case export directory available create :","code":"# Check if exists and if not create it export_dir <- paths %>%   kwb.utils::selectElements(\"export_dir\") %>%   kwb.utils::createDirectory() %>%   kwb.utils::safePath() ## Convert xls to xlsx files kwb.geosalz::convert_xls_as_xlsx(input_dir, export_dir)  ## Copy xlsx files  kwb.geosalz::copy_xlsx_files(input_dir, export_dir, overwrite = TRUE)"},{"path":[]},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/workflow.html","id":"categorise-the-excel-files","dir":"Articles","previous_headings":"3 Data import","what":"3.1 Categorise the Excel Files","title":"Workflow","text":"Select files consist : Header 1 (meta): manually added metadata extra sheet Header 1: single header tables Header 2: two-row header tables Header 4: four row header tables","code":"# Get all xlsx files to be imported files <- dir(export_dir, \".xlsx\", recursive = TRUE, full.names = TRUE)  files_meta <- c(   \"Meta Info\",   \"Header ident\",   \"Parameter ident\",   \"Parameter\",   \"Info-Altdaten\",   \"Brandenburg_Parameter_BWB_Stolpe\",   \"Kopie von Brandenburg_Parameter_BWB_Stolpe\",   \"2005-10BeschilderungProbenahmestellenGWWIII\",   \"Bezeichnungen der Reinwasserstellen\",   \"ReinwasserNomenklatur\",   \"Info zu Altdaten 1970-1998\",   \"2018-06-01 Lab Parameter\" )  files_header1_meta <- c(   \"FRI_Br_GAL_C_Einzelparameter\",   \"FRI_Roh_Rein_NH4+NO3_2001-2003\",   \"MTBE_2003-11_2004\",   \"Reinwasser_2003_Fe_Mn\", ## unclean   \"VC_CN_in Brunnen bis Aug_2005 \", ## unclean   \"Wuhlheide_Beelitzhof_Teildaten\" ## unclean )  files_header1 <- c(   \"2018-04-11 Chlorid in Brunnen - √úbersicht\",   \"2018-04-27 LIMS Reiw & Rohw Sammel \",   \"2018-04-27 Rohwasser Bericht - Galerief√∂rdermengen\" )  files_header4 <- c(   \"STO Rohw_1999-6_2004\",   \"Wuhlheide_1999-2003_Okt - Neu\",   \"KAU_1999-Okt2003\" )  files_archive <- \"Siebert\"  files_to_ignore <- c(   files_meta, files_header1, files_header1_meta,   files_header4, files_archive )  in_files_to_ignore <- kwb.utils::removeExtension(basename(files)) %in%    files_to_ignore  filepaths_header2 <- files[!in_files_to_ignore]"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/workflow.html","id":"header-1-with-metadata","dir":"Articles","previous_headings":"3 Data import","what":"3.2 Header 1 (with metadata)","title":"Workflow","text":"","code":"cond1 <- kwb.utils::removeExtension(basename(files)) %in% files_header1_meta  filepaths_header1_meta <- files[cond1]  labor_list_1meta <- kwb.geosalz::import_labor(   filepaths_header1_meta ,   export_dir,   func = kwb.geosalz::read_bwb_header1_meta )  has_errors <- sapply(labor_list_1meta, kwb.utils::isTryError) #has_errors  labor_df_1meta <- data.table::rbindlist(   l = labor_list_1meta[!has_errors],   fill = TRUE ) library(dplyr)  cond2 <- labor_df_1meta$OriginalName %in% c(   \"el. Leitf√§higkeit (25 ¬∞C)\", \"Chlorid\", \"Sulfat\" )  labor_df_1meta[cond2 & !is.na(labor_df_1meta$DataValue), ] %>%   dplyr::group_by_(\"OriginalName\", \"Me√üstelle\") %>%   dplyr::summarise(n = n())"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/workflow.html","id":"header-2","dir":"Articles","previous_headings":"3 Data import","what":"3.3 Header 2","title":"Workflow","text":"","code":"labor_header2_list <- kwb.geosalz::import_labor(   files = filepaths_header2,   export_dir = export_dir,   func = kwb.geosalz::read_bwb_header2 )  has_errors <- sapply(labor_header2_list, kwb.utils::isTryError) #has_errors  labor_header2_df <- data.table::rbindlist(   l = labor_header2_list[!has_errors],   fill = TRUE )"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/workflow.html","id":"header-4","dir":"Articles","previous_headings":"3 Data import","what":"3.4 Header 4","title":"Workflow","text":"","code":"cond3 <- kwb.utils::removeExtension(basename(files)) %in% files_header4  filepaths_header4 <- files[cond3]  labor_header4_list <- kwb.geosalz::import_labor(   files = filepaths_header4,   export_dir = export_dir,   func = kwb.geosalz::read_bwb_header4 )  has_errors <- sapply(labor_header4_list, inherits, \"try-error\") has_errors  labor_header4_df <- data.table::rbindlist(   l = labor_header4_list[!has_errors],   fill = TRUE )"},{"path":[]},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/workflow.html","id":"merging-header2-and-header4","dir":"Articles","previous_headings":"4 Data cleaning","what":"4.1 Merging Header2 and Header4","title":"Workflow","text":"","code":"labor_all <- data.table::rbindlist(   l = list(     x1 = labor_header2_df,     x2 = labor_header4_df   ),   fill = TRUE )"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/workflow.html","id":"filtering","dir":"Articles","previous_headings":"4 Data cleaning","what":"4.2 Filtering","title":"Workflow","text":"","code":"labor_all <- labor_all %>%   dplyr::filter(!is.na(.data$DataValue)) %>%   dplyr::mutate(     Date = dplyr::if_else(       condition = !is.na(.data$Datum),       true = .data$Datum,       false = .data$Probenahme     )   ) %>%   ### Some \"Datum\" rentries are missing in;   ### K-TL_LSW-Altdaten-Werke Teil 1\\Werke Teil 1\\Kaulsdorf\\KAU_1999-Okt2003.xlsx   ### sheets: 66 KAU Rein 1999-2000, 65 KAU NordS√ºd 1999-2000   dplyr::filter(!is.na(.data$Date)) %>%   dplyr::filter(!is.na(.data$VariableName_org))  nrow(labor_all)"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/workflow.html","id":"reducing-dataset-by-adding-metadata","dir":"Articles","previous_headings":"4 Data cleaning","what":"4.3 Reducing dataset by adding metadata","title":"Workflow","text":"","code":"labordaten_ww <- kwb.geosalz::add_para_metadata(   df = labor_all,   lookup_para_path = paths$lookup_para,   parameters_path = paths$parameters )  labordaten_ww <- kwb.geosalz::add_site_metadata(   df = labordaten_ww,   site_path = paths$sites ) %>%   dplyr::mutate(     year = as.numeric(format(.data$Date,format = '%Y')),     DataValue = as.numeric(.data$DataValue)   )  nrow(labordaten_ww)"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/workflow.html","id":"exporting-cleaned-dataset","dir":"Articles","previous_headings":"4 Data cleaning","what":"5. Exporting cleaned dataset","title":"Workflow","text":"","code":"fs::dir_create(paths$cleaned_data_dir, recursive = TRUE) print(sprintf(\"Export cleaned data to: %s\", paths$cleaned_data_dir)) foerdermengen_ww <- kwb.geosalz::get_foerdermengen(paths$foerdermengen)  save(   labordaten_ww,    foerdermengen_ww,   file = file.path(paths$cleaned_data_dir, \"cleaned-data.Rds\") )  write.csv2(   labordaten_ww,   file.path(paths$cleaned_data_dir, \"labordaten_ww.csv\"),   row.names = FALSE )  write.csv2(   foerdermengen_ww,   file = file.path(paths$cleaned_data_dir, \"foerdermengen_ww.csv\"),   row.names = FALSE )"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/workflow.html","id":"visualisation","dir":"Articles","previous_headings":"4 Data cleaning","what":"6. Visualisation","title":"Workflow","text":"","code":"library(ggplot2)  fs::dir_create(paths$figures_dir, recursive = TRUE) print(sprintf(\"Export figures/plots to: %s\", paths$figures_dir))  para_info <- kwb.geosalz::get_parameters_meta(paths$parameters) water_types <- c(\"Reinwasser\", \"Rohwasser\")  plot_to_pdf <- function(pdf_file, labordaten_ww, para_info, water_type, paths) {   pdf(file = pdf_file, width = 14, height = 9)   on.exit(dev.off())      for (sel_para_id in unique(labordaten_ww$para_id)) {          my_selection <- sprintf(       \"%s (%s)\",       para_info$para_kurzname[para_info$para_id == sel_para_id],       water_type     )          tmp <- labordaten_ww %>%       dplyr::filter(prufgegenstand == water_type) %>%       dplyr::filter(para_id == sel_para_id) %>%       dplyr::group_by(.data$para_kurzname, .data$werk, .data$year) %>%       dplyr::summarise(         mean_DataValue = mean(as.numeric(.data$DataValue), na.rm = TRUE)       ) %>%       dplyr::filter(!is.na(.data$werk)) %>%       dplyr::left_join(         y = kwb.geosalz::get_foerdermengen(paths$foerdermengen),         by = c(\"werk\", \"year\")       )          if (nrow(tmp) > 0) {              cat(sprintf(\"for %s\\n\", my_selection))              g <- ggplot2::ggplot(tmp, mapping = ggplot2::aes_string(         x = \"year\",         y = \"mean_DataValue\",         col = \"werk\"       )) +         ggplot2::geom_point() +         ggplot2::geom_line() +         ggplot2::theme_bw() +         ggplot2::ggtitle(label = my_selection) +         ggplot2::labs(x = \"\", y = \"Jahresmittelwert\")              print(g)            } else {              cat(sprintf(\"not data availabe for %s\\n\", my_selection))     }   } }   for (water_type in water_types) {      pdf_file <- file.path(     paths$figures_dir,     sprintf(       \"Zeitreihen_Jahresmittelwerte_Werke_%s.pdf\",       water_type     )   )      cat(sprintf(\"Creating plot:\\n%s\\n\", pdf_file))   plot_to_pdf(pdf_file, labordaten_ww, para_info, water_type, paths) }"},{"path":[]},{"path":[]},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/workflow.html","id":"packages","dir":"Articles","previous_headings":"7 Session Info","what":"Packages","title":"Workflow","text":"","code":"#>  package     * version date (UTC) lib source #>  bslib         0.6.1   2023-11-28 [1] CRAN (R 4.3.2) #>  cachem        1.0.8   2023-05-01 [1] RSPM (R 4.3.0) #>  cli           3.6.2   2023-12-11 [1] CRAN (R 4.3.2) #>  desc          1.4.2   2022-09-08 [1] RSPM (R 4.3.0) #>  digest        0.6.34  2024-01-11 [1] CRAN (R 4.3.2) #>  dplyr       * 1.1.4   2023-11-17 [1] CRAN (R 4.3.2) #>  evaluate      0.23    2023-11-01 [1] CRAN (R 4.3.2) #>  fansi         1.0.6   2023-12-08 [1] CRAN (R 4.3.2) #>  fastmap       1.1.1   2023-02-24 [1] RSPM (R 4.3.0) #>  fs            1.6.3   2023-07-20 [1] RSPM (R 4.3.0) #>  generics      0.1.3   2022-07-05 [1] RSPM (R 4.3.0) #>  glue          1.7.0   2024-01-09 [1] CRAN (R 4.3.2) #>  htmltools     0.5.7   2023-11-03 [1] CRAN (R 4.3.2) #>  jquerylib     0.1.4   2021-04-26 [1] RSPM (R 4.3.0) #>  jsonlite      1.8.8   2023-12-04 [1] CRAN (R 4.3.2) #>  knitr         1.45    2023-10-30 [1] CRAN (R 4.3.1) #>  kwb.utils     0.14.1  2023-09-23 [1] Github (kwb-r/kwb.utils@0930eae) #>  lifecycle     1.0.4   2023-11-07 [1] CRAN (R 4.3.2) #>  magrittr      2.0.3   2022-03-30 [1] RSPM (R 4.3.0) #>  memoise       2.0.1   2021-11-26 [1] RSPM (R 4.3.0) #>  pillar        1.9.0   2023-03-22 [1] RSPM (R 4.3.0) #>  pkgconfig     2.0.3   2019-09-22 [1] RSPM (R 4.3.0) #>  pkgdown       2.0.7   2022-12-14 [1] RSPM (R 4.3.0) #>  purrr         1.0.2   2023-08-10 [1] RSPM (R 4.3.0) #>  R6            2.5.1   2021-08-19 [1] RSPM (R 4.3.0) #>  ragg          1.2.5   2023-01-12 [1] RSPM (R 4.3.0) #>  rlang         1.1.3   2024-01-10 [1] CRAN (R 4.3.2) #>  rmarkdown     2.25    2023-09-18 [1] RSPM (R 4.3.0) #>  rprojroot     2.0.3   2022-04-02 [1] RSPM (R 4.3.0) #>  sass          0.4.8   2023-12-06 [1] CRAN (R 4.3.2) #>  sessioninfo   1.2.2   2021-12-06 [1] RSPM (R 4.3.0) #>  stringi       1.8.3   2023-12-11 [1] CRAN (R 4.3.2) #>  stringr       1.5.1   2023-11-14 [1] CRAN (R 4.3.2) #>  systemfonts   1.0.5   2023-10-09 [1] CRAN (R 4.3.1) #>  textshaping   0.3.6   2021-10-13 [1] RSPM (R 4.3.0) #>  tibble        3.2.1   2023-03-20 [1] RSPM (R 4.3.0) #>  tidyr       * 1.3.1   2024-01-24 [1] CRAN (R 4.3.2) #>  tidyselect    1.2.0   2022-10-10 [1] RSPM (R 4.3.0) #>  utf8          1.2.4   2023-10-22 [1] CRAN (R 4.3.1) #>  vctrs         0.6.5   2023-12-01 [1] CRAN (R 4.3.2) #>  xfun          0.42    2024-02-08 [1] CRAN (R 4.3.2) #>  yaml          2.3.8   2023-12-11 [1] CRAN (R 4.3.2) #>  #>  [1] D:/a/_temp/Library #>  [2] C:/R/library"},{"path":"https://kwb-r.github.io/kwb.geosalz/articles/workflow.html","id":"pandoc","dir":"Articles","previous_headings":"7 Session Info > Packages","what":"Pandoc","title":"Workflow","text":"","code":"#>                                                pandoc_directory pandoc_version #> 1 C:/HOSTED~1/windows/pandoc/31F387~1.11/x64/PANDOC~1.11/pandoc         3.1.11"},{"path":"https://kwb-r.github.io/kwb.geosalz/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Michael Rustler. Author, maintainer. Hauke Sonnenberg. Contributor. . Funder. . Copyright holder.","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Rustler M (2024). kwb.geosalz: R Package Documenting Workflow Used Project \"geosalz\". R package version 0.6.0, https://github.com/KWB-R/kwb.geosalz.","code":"@Manual{,   title = {kwb.geosalz: R Package for Documenting Workflow Used in Project \"geosalz\"},   author = {Michael Rustler},   year = {2024},   note = {R package version 0.6.0},   url = {https://github.com/KWB-R/kwb.geosalz}, }"},{"path":"https://kwb-r.github.io/kwb.geosalz/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"R Package for Documenting Workflow Used in Project ","text":"installing latest release R package run following code :","code":"# Enable repository from kwb-r options(repos = c(   kwbr = 'https://kwb-r.r-universe.dev',   CRAN = 'https://cloud.r-project.org'))    # Download and install kwb.geosalz in R install.packages('kwb.geosalz')  # Browse the kwb.geosalz manual pages help(package = 'kwb.geosalz')"},{"path":"https://kwb-r.github.io/kwb.geosalz/index.html","id":"usage","dir":"","previous_headings":"","what":"Usage","title":"R Package for Documenting Workflow Used in Project ","text":"Checkout Workflow article use R package.","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2018-2022 Kompetenzzentrum Wasser Berlin gGmbH (KWB) Permission hereby granted, free charge, person obtaining copy software associated documentation files (‚ÄúSoftware‚Äù), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED ‚Äú‚Äù, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/add_para_metadata.html","id":null,"dir":"Reference","previous_headings":"","what":"add_para_metadata ‚Äî add_para_metadata","title":"add_para_metadata ‚Äî add_para_metadata","text":"add_para_metadata","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/add_para_metadata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"add_para_metadata ‚Äî add_para_metadata","text":"","code":"add_para_metadata(df, lookup_para_path, parameters_path)"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/add_para_metadata.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"add_para_metadata ‚Äî add_para_metadata","text":"df df lookup_para_path lookup_para_path parameters_path parameters_path","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/add_para_metadata.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"add_para_metadata ‚Äî add_para_metadata","text":"return \"df\" added parameter metadata","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/add_site_metadata.html","id":null,"dir":"Reference","previous_headings":"","what":"add_site_metadata ‚Äî add_site_metadata","title":"add_site_metadata ‚Äî add_site_metadata","text":"add_site_metadata","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/add_site_metadata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"add_site_metadata ‚Äî add_site_metadata","text":"","code":"add_site_metadata(df, site_path)"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/add_site_metadata.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"add_site_metadata ‚Äî add_site_metadata","text":"df df site_path site_path","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/add_site_metadata.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"add_site_metadata ‚Äî add_site_metadata","text":"data frame added site metadata","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/all_defined.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if all strings are not empty ‚Äî all_defined","title":"Check if all strings are not empty ‚Äî all_defined","text":"Check strings empty","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/all_defined.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if all strings are not empty ‚Äî all_defined","text":"","code":"all_defined(x)"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/all_defined.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check if all strings are not empty ‚Äî all_defined","text":"x vector character","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/all_defined.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if all strings are not empty ‚Äî all_defined","text":"TRUE FALSE","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/cat_green_bold_0.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function: cat_green_bold_0 ‚Äî cat_green_bold_0","title":"Helper function: cat_green_bold_0 ‚Äî cat_green_bold_0","text":"Helper function: cat_green_bold_0","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/cat_green_bold_0.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function: cat_green_bold_0 ‚Äî cat_green_bold_0","text":"","code":"cat_green_bold_0(...)"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/cat_green_bold_0.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function: cat_green_bold_0 ‚Äî cat_green_bold_0","text":"... text passed crayon::green()","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/cat_green_bold_0.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Helper function: cat_green_bold_0 ‚Äî cat_green_bold_0","text":"formatted text output","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/cat_red_bold_0.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function: cat_red_bold_0 ‚Äî cat_red_bold_0","title":"Helper function: cat_red_bold_0 ‚Äî cat_red_bold_0","text":"Helper function: cat_red_bold_0","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/cat_red_bold_0.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function: cat_red_bold_0 ‚Äî cat_red_bold_0","text":"","code":"cat_red_bold_0(...)"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/cat_red_bold_0.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function: cat_red_bold_0 ‚Äî cat_red_bold_0","text":"... text passed crayon::red","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/cat_red_bold_0.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Helper function: cat_red_bold_0 ‚Äî cat_red_bold_0","text":"formatted text output","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/column_pattern_gather_ignore.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function: column_pattern_gather_ignore ‚Äî column_pattern_gather_ignore","title":"Helper function: column_pattern_gather_ignore ‚Äî column_pattern_gather_ignore","text":"Helper function: column_pattern_gather_ignore","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/column_pattern_gather_ignore.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function: column_pattern_gather_ignore ‚Äî column_pattern_gather_ignore","text":"","code":"column_pattern_gather_ignore(   fields = c(\"Datum\", \"KN\", \"[iI]nterne Nr.\", \"Name der\", \"Ort\", \"Probe\", \"Pr√º\",     \"Untersuchung\", \"Labor\", \"Jahr\", \"Galer\", \"Detail\", \"Me√ü\", \"Zeit\", \"Bezei\", \"Monat\") )"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/column_pattern_gather_ignore.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function: column_pattern_gather_ignore ‚Äî column_pattern_gather_ignore","text":"fields column names ignored gathering (default: c( \"Datum\", \"KN\", \"[iI]nterne Nr.\", \"Name der\", \"Ort\", \"Probe\", \"Pr\\u00FC\", \"Untersuchung\", \"Labor\", \"Jahr\", \"Galer\", \"Detail\", \"\\u00DF\", \"Zeit\", \"Bezei\", \"Monat\")","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/column_pattern_gather_ignore.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Helper function: column_pattern_gather_ignore ‚Äî column_pattern_gather_ignore","text":"vector ignored columns gathering","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/column_pattern_gather_ignore_clean.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function: column_pattern_gather_ignore_clean ‚Äî column_pattern_gather_ignore_clean","title":"Helper function: column_pattern_gather_ignore_clean ‚Äî column_pattern_gather_ignore_clean","text":"Helper function: column_pattern_gather_ignore_clean","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/column_pattern_gather_ignore_clean.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function: column_pattern_gather_ignore_clean ‚Äî column_pattern_gather_ignore_clean","text":"","code":"column_pattern_gather_ignore_clean(   fields = c(\"LabSampleCode\", \"Date\", \"Time\", \"Waterbody\", \"ExSiteCode\", \"Site\") )"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/column_pattern_gather_ignore_clean.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function: column_pattern_gather_ignore_clean ‚Äî column_pattern_gather_ignore_clean","text":"fields column names ignored gathering (default: c(\"LabSampleCode\", \"Date\", \"Time\", \"Waterbody\", \"ExSiteCode\", Site\")","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/column_pattern_gather_ignore_clean.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Helper function: column_pattern_gather_ignore_clean ‚Äî column_pattern_gather_ignore_clean","text":"vector ignored columns gathering","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/convert_phreeqc_input_to_wide.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert PhreeqC input to ","title":"Convert PhreeqC input to ","text":"Convert PhreeqC input \"wide\" format","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/convert_phreeqc_input_to_wide.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert PhreeqC input to ","text":"","code":"convert_phreeqc_input_to_wide(phreeqc_input)"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/convert_phreeqc_input_to_wide.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert PhreeqC input to ","text":"phreeqc_input PhreeqC input retrieved get_phreeqc_data","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/convert_phreeqc_input_to_wide.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert PhreeqC input to ","text":"PhreeqC input \"wide\" format","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/convert_to_sf.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert to SF ‚Äî convert_to_sf","title":"Convert to SF ‚Äî convert_to_sf","text":"Convert SF","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/convert_to_sf.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert to SF ‚Äî convert_to_sf","text":"","code":"convert_to_sf(   df,   crs_source = 25833,   crs_target = 4326,   col_coord_x = \"Rechtswert_UTM_33_N\",   col_cood_y = \"Hochwert_UTM_33_N\" )"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/convert_to_sf.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert to SF ‚Äî convert_to_sf","text":"df data frame tibble spatial data crs_source origingal CRS (default: 25833) crs_target target CRS (default: 4326) col_coord_x column name latitude (default: \"Rechtswert_UTM_33_N\") col_cood_y column name longitude (default: \"Hochwert_UTM_33_N\")","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/convert_to_sf.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert to SF ‚Äî convert_to_sf","text":"data frame tibble converted sf","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/convert_to_sf.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert to SF ‚Äî convert_to_sf","text":"","code":"gwl_master <- jsonlite::fromJSON(\"https://kwb-r.github.io/wasserportal/stations_gwl_master.json\") convert_to_sf(gwl_master) #> Simple feature collection with 906 features and 9 fields #> Geometry type: POINT #> Dimension:     XY #> Bounding box:  xmin: 13.09291 ymin: 52.34336 xmax: 13.75514 ymax: 52.66925 #> Geodetic CRS:  WGS 84 #> First 10 features: #>    Nummer        Bezirk Betreiber            Auspraegung #> 1       1 Reinickendorf     Senat               GW-Stand #> 2       2 Reinickendorf     Senat               GW-Stand #> 3       3 Reinickendorf     Senat     GW-Stand + GW-G√ºte #> 4       4 Reinickendorf     Senat               GW-Stand #> 5       9 Reinickendorf     Senat               GW-Stand #> 6      21 Reinickendorf     Senat               GW-Stand #> 7      24 Reinickendorf     Senat               GW-Stand #> 8      25 Reinickendorf     Senat               GW-Stand #> 9      26 Reinickendorf     Senat GW-Stand, tagesaktuell #> 10     30 Reinickendorf     Senat               GW-Stand #>                        Grundwasserleiter Gelaendeoberkante_GOK_m_ue_NHN #> 1   Hauptgrundwasserleiter (GWL 1.3 + 2)                          49.20 #> 2   Hauptgrundwasserleiter (GWL 1.3 + 2)                          37.65 #> 3   Hauptgrundwasserleiter (GWL 1.3 + 2)                          37.87 #> 4   Hauptgrundwasserleiter (GWL 1.3 + 2)                          39.88 #> 5  lokal ausgebildeter Grundwasserk√∂rper                          42.14 #> 6   Hauptgrundwasserleiter (GWL 1.3 + 2)                          37.25 #> 7   Hauptgrundwasserleiter (GWL 1.3 + 2)                          40.25 #> 8   Hauptgrundwasserleiter (GWL 1.3 + 2)                          41.98 #> 9   Hauptgrundwasserleiter (GWL 1.3 + 2)                          42.70 #> 10  Hauptgrundwasserleiter (GWL 1.3 + 2)                          39.63 #>    Rohroberkante_m_ue_NHN Filteroberkante_m_u_GOK Filterunterkante_m_u_GOK #> 1                   49.49                   37.34                    39.34 #> 2                   38.06                   15.59                    17.59 #> 3                   38.65                   12.27                    13.27 #> 4                   40.36                   16.00                    18.00 #> 5                   42.67                   17.70                    18.70 #> 6                   38.00                    8.10                     9.10 #> 7                   40.43                   10.88                    11.88 #> 8                   42.26                    5.47                     6.47 #> 9                   43.56                   11.74                    12.74 #> 10                  39.90                   12.00                    13.00 #>                     geometry #> 1  POINT (13.29247 52.62308) #> 2  POINT (13.31921 52.62262) #> 3   POINT (13.3131 52.61407) #> 4  POINT (13.29259 52.60773) #> 5   POINT (13.35574 52.6204) #> 6  POINT (13.32453 52.57572) #> 7  POINT (13.35288 52.56763) #> 8  POINT (13.36019 52.57023) #> 9  POINT (13.36547 52.57433) #> 10 POINT (13.35974 52.56318)"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/convert_xls_as_xlsx.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert xls to xlsx ‚Äî convert_xls_as_xlsx","title":"Convert xls to xlsx ‚Äî convert_xls_as_xlsx","text":"Convert xls xlsx","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/convert_xls_as_xlsx.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert xls to xlsx ‚Äî convert_xls_as_xlsx","text":"","code":"convert_xls_as_xlsx(   input_dir,   export_dir = tempdir(),   office_folder = safe_office_folder(),   dbg = TRUE )"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/convert_xls_as_xlsx.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert xls to xlsx ‚Äî convert_xls_as_xlsx","text":"input_dir input directory containing .xls files export_dir export directory (default: tempdir()) office_folder office folder path (default: safe_office_folder) dbg debug (default: TRUE)","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/convert_xls_to_xlsx.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function: convert_xls_to_xlsx ‚Äî convert_xls_to_xlsx","title":"Helper function: convert_xls_to_xlsx ‚Äî convert_xls_to_xlsx","text":"Helper function: convert_xls_to_xlsx","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/convert_xls_to_xlsx.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function: convert_xls_to_xlsx ‚Äî convert_xls_to_xlsx","text":"","code":"convert_xls_to_xlsx(exe, xls, xlsx, i, n_files, dbg = TRUE)"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/convert_xls_to_xlsx.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function: convert_xls_to_xlsx ‚Äî convert_xls_to_xlsx","text":"exe exe xls xls xlsx xlsx n_files n_files dbg debug (default: TRUE)","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/copy_lookup_para_file.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function: copy_lookup_para_file ‚Äî copy_lookup_para_file","title":"Helper function: copy_lookup_para_file ‚Äî copy_lookup_para_file","text":"Helper function: copy_lookup_para_file","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/copy_lookup_para_file.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function: copy_lookup_para_file ‚Äî copy_lookup_para_file","text":"","code":"copy_lookup_para_file(   from_dir,   to_dir,   overwrite = FALSE,   recursive = TRUE,   file_pattern = \"^lookup_para\\\\.csv$\" )"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/copy_lookup_para_file.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function: copy_lookup_para_file ‚Äî copy_lookup_para_file","text":"from_dir input directory xlsx files to_dir target directory copy xlsx files overwrite existing files overwritten (TRUE) otherwise (FALSE) ? (default: FALSE) recursive TRUE recursively find xlsx files directory specified parameter \"from_dir\" (default: TRUE) file_pattern pattern identifying lookup_para file (default: \"^lookup_para\\.csv$\")","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/copy_xlsx_files.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function: copy_xlsx_files ‚Äî copy_xlsx_files","title":"Helper function: copy_xlsx_files ‚Äî copy_xlsx_files","text":"Helper function: copy_xlsx_files","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/copy_xlsx_files.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function: copy_xlsx_files ‚Äî copy_xlsx_files","text":"","code":"copy_xlsx_files(   from_dir,   to_dir,   overwrite = FALSE,   recursive = TRUE,   file_pattern = \"[xX][lL][sS][xX]\" )"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/copy_xlsx_files.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function: copy_xlsx_files ‚Äî copy_xlsx_files","text":"from_dir input directory xlsx files to_dir target directory copy xlsx files overwrite existing files overwritten (TRUE) otherwise (FALSE) ? (default: FALSE) recursive TRUE recursively find xlsx files directory specified parameter \"from_dir\" (default: TRUE) file_pattern pattern identifying xlsx fles (default: \"[xX][lL][sS][xX]\")","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/create_emshoff91_import.html","id":null,"dir":"Reference","previous_headings":"","what":"Create EMSHOFF91 Import Data Frame ‚Äî create_emshoff91_import","title":"Create EMSHOFF91 Import Data Frame ‚Äî create_emshoff91_import","text":"Create EMSHOFF91 Import Data Frame","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/create_emshoff91_import.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create EMSHOFF91 Import Data Frame ‚Äî create_emshoff91_import","text":"","code":"create_emshoff91_import(   ods_dir,   files_to_ignore = c(\"cl25\", \"clliste\", \"rupelauf\", \"salzlast\") )"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/create_emshoff91_import.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create EMSHOFF91 Import Data Frame ‚Äî create_emshoff91_import","text":"ods_dir directory \".ods\" files created manually importing original \".wq1\" files LibreOffice 7.0 Ubuntu encoding (Western Europe (DOS/OS2-437/US)) exporting \".ods\" format files_to_ignore tidied names files ignore due complex data input structure yet covered importer (default: c(\"cl25\", \"clliste\", \"gwnguete\", \"rupelauf\", \"salzlast\"))","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/create_emshoff91_import.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create EMSHOFF91 Import Data Frame ‚Äî create_emshoff91_import","text":"data frame columns \"ods_paths\" (full paths \".ods\" files), \"ods_files\" (\"basenames\") \"ods_names_clean\" (tidied names used identifier)","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/create_emshoff91_import.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create EMSHOFF91 Import Data Frame ‚Äî create_emshoff91_import","text":"","code":"if (FALSE) { ods_dir <- \"<replace-with-path-to-files>/emshoff91/converted_ods\" emshoff91_import <- create_emshoff91_import(ods_dir) }"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/create_sftp_connection.html","id":null,"dir":"Reference","previous_headings":"","what":"Measurement Chains: Create an SFTP Connection ‚Äî create_sftp_connection","title":"Measurement Chains: Create an SFTP Connection ‚Äî create_sftp_connection","text":"Measurement Chains: Create SFTP Connection","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/create_sftp_connection.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Measurement Chains: Create an SFTP Connection ‚Äî create_sftp_connection","text":"","code":"create_sftp_connection()"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/create_sftp_connection.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Measurement Chains: Create an SFTP Connection ‚Äî create_sftp_connection","text":"sftp connection","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/delete_registry.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function: delete_registry ‚Äî delete_registry","title":"Helper function: delete_registry ‚Äî delete_registry","text":"Helper function: delete_registry","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/delete_registry.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function: delete_registry ‚Äî delete_registry","text":"","code":"delete_registry(office_folder = safe_office_folder(), dbg = TRUE)"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/delete_registry.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function: delete_registry ‚Äî delete_registry","text":"office_folder office folder path (default: safe_office_folder) dbg debug (default: TRUE)","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/download_measurementchains_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Measurement Chains: download data ‚Äî download_measurementchains_data","title":"Measurement Chains: download data ‚Äî download_measurementchains_data","text":"Measurement Chains: download data","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/download_measurementchains_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Measurement Chains: download data ‚Äî download_measurementchains_data","text":"","code":"download_measurementchains_data(   sftp_paths,   target_directory = temp_dir(),   sftp_connection = create_sftp_connection(),   run_parallel = TRUE,   debug = FALSE )"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/download_measurementchains_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Measurement Chains: download data ‚Äî download_measurementchains_data","text":"sftp_paths character vector paths files downloaded. retrieved get_measurementchains_files column \"sftp_path\" target_directory target directory sftp_connection SFTP connnection retrieved create_sftp_connection run_parallel default: TRUE debug show debug messages (default: FALSE)","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/download_measurementchains_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Measurement Chains: download data ‚Äî download_measurementchains_data","text":"tibble columns file_id, sftp_path local_path csv files","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/download_measurementchains_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Measurement Chains: download data ‚Äî download_measurementchains_data","text":"","code":"if (FALSE) { mc_files <- kwb.geosalz::get_measurementchains_files() target_directory <- tempdir() local_paths <- kwb.geosalz::download_measurementchains_data( sftp_paths = mc_files$sftp_path, target_directory) }"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/emshoff91_list_to_df.html","id":null,"dir":"Reference","previous_headings":"","what":"Emshoff 91: list to data frame ‚Äî emshoff91_list_to_df","title":"Emshoff 91: list to data frame ‚Äî emshoff91_list_to_df","text":"Emshoff 91: list data frame","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/emshoff91_list_to_df.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Emshoff 91: list to data frame ‚Äî emshoff91_list_to_df","text":"","code":"emshoff91_list_to_df(emshoff91_list)"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/emshoff91_list_to_df.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Emshoff 91: list to data frame ‚Äî emshoff91_list_to_df","text":"emshoff91_list list retrieved read_multiple_emshoff91_ods","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/emshoff91_list_to_df.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Emshoff 91: list to data frame ‚Äî emshoff91_list_to_df","text":"tibble","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/emshoff91_remap_values.html","id":null,"dir":"Reference","previous_headings":"","what":"Emshoff 91: remap values from imported tibble ‚Äî emshoff91_remap_values","title":"Emshoff 91: remap values from imported tibble ‚Äî emshoff91_remap_values","text":"Emshoff 91: remap values imported tibble","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/emshoff91_remap_values.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Emshoff 91: remap values from imported tibble ‚Äî emshoff91_remap_values","text":"","code":"emshoff91_remap_values(   emshoff91_df,   remap_list = list(fi_mi = \"fi_mi_m_nn\", ku_sto = \"kupp_st\", lf = \"el_lf\", progr =     \"beprob_progr\", strat = \"stratigr\", uv254 = \"uv_ext\"),   delete_cols = TRUE )"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/emshoff91_remap_values.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Emshoff 91: remap values from imported tibble ‚Äî emshoff91_remap_values","text":"emshoff91_df tibble retrieved emshoff91_list_to_df remap_list list values remapped. Names list columns  values contained list values mapped (default: list(fi_mi = \"fi_mi_m_nn\",  ku_sto = \"kupp_st\", lf = \"el_lf\", progr = \"beprob_progr\", strat = \"stratigr\",  uv254 = \"uv_ext\")) delete_cols unneeded columns deleted, .e. ones data  mapped (default: TRUE)","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/emshoff91_remap_values.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Emshoff 91: remap values from imported tibble ‚Äî emshoff91_remap_values","text":"data frame remapped values deleted columns values  copied (default: TRUE)","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/gather_and_join_1.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function: gather_and_join_1 ‚Äî gather_and_join_1","title":"Helper function: gather_and_join_1 ‚Äî gather_and_join_1","text":"Helper function: gather_and_join_1","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/gather_and_join_1.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function: gather_and_join_1 ‚Äî gather_and_join_1","text":"","code":"gather_and_join_1(tmp_data, columns_keep, metadata, dbg = FALSE)"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/gather_and_join_1.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function: gather_and_join_1 ‚Äî gather_and_join_1","text":"tmp_data tmp_data columns_keep columns_keep metadata metadata dbg dbg (default: FALSE)","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/gather_and_join_1.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Helper function: gather_and_join_1 ‚Äî gather_and_join_1","text":"gathered joined data frame","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/gather_and_join_2.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function: gather_and_join_2 ‚Äî gather_and_join_2","title":"Helper function: gather_and_join_2 ‚Äî gather_and_join_2","text":"Helper function: gather_and_join_2","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/gather_and_join_2.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function: gather_and_join_2 ‚Äî gather_and_join_2","text":"","code":"gather_and_join_2(tmp_content, columns_keep, header)"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/gather_and_join_2.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function: gather_and_join_2 ‚Äî gather_and_join_2","text":"tmp_content tmp_content columns_keep columns_keep header header","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/gather_and_join_2.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Helper function: gather_and_join_2 ‚Äî gather_and_join_2","text":"gathered joined data frame","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/gather_ignore.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function: gather_ignore ‚Äî gather_ignore","title":"Helper function: gather_ignore ‚Äî gather_ignore","text":"Helper function: gather_ignore","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/gather_ignore.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function: gather_ignore ‚Äî gather_ignore","text":"","code":"gather_ignore(   fields = c(\"Datum\", \"KN\", \"[iI]nterne Nr.\", \"Name der\", \"Ort\", \"Probe\", \"Pr√º\",     \"Untersuchung\", \"Labor\", \"Jahr\", \"Galer\", \"Detail\", \"Me√ü\", \"Zeit\", \"Bezei\", \"Monat\") )"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/gather_ignore.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function: gather_ignore ‚Äî gather_ignore","text":"fields column names ignored gathering (default: c( \"Datum\", \"KN\", \"[iI]nterne Nr.\", \"Name der\", \"Ort\", \"Probe\", \"Pr\\u00FC\", \"Untersuchung\", \"Labor\", \"Jahr\", \"Galer\", \"Detail\", \"\\u00DF\", \"Zeit\", \"Bezei\", \"Monat\")","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/gather_ignore.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Helper function: gather_ignore ‚Äî gather_ignore","text":"vector ignored columns gathering","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/gather_ignore_clean.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function: gather_ignore_clean ‚Äî gather_ignore_clean","title":"Helper function: gather_ignore_clean ‚Äî gather_ignore_clean","text":"Helper function: gather_ignore_clean","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/gather_ignore_clean.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function: gather_ignore_clean ‚Äî gather_ignore_clean","text":"","code":"gather_ignore_clean(   fields = c(\"LabSampleCode\", \"Date\", \"Time\", \"Waterbody\", \"ExSiteCode\", \"Site\") )"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/gather_ignore_clean.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function: gather_ignore_clean ‚Äî gather_ignore_clean","text":"fields column names ignored gathering (default: c(\"LabSampleCode\", \"Date\", \"Time\", \"Waterbody\", \"ExSiteCode\", Site\")","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/gather_ignore_clean.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Helper function: gather_ignore_clean ‚Äî gather_ignore_clean","text":"vector ignored columns gathering","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_excelcnv_exe.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function: get_excelcnv_exe ‚Äî get_excelcnv_exe","title":"Helper function: get_excelcnv_exe ‚Äî get_excelcnv_exe","text":"Helper function: get_excelcnv_exe","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_excelcnv_exe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function: get_excelcnv_exe ‚Äî get_excelcnv_exe","text":"","code":"get_excelcnv_exe(office_folder = safe_office_folder())"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_excelcnv_exe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function: get_excelcnv_exe ‚Äî get_excelcnv_exe","text":"office_folder office folder path (default: safe_office_folder","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_excelcnv_exe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Helper function: get_excelcnv_exe ‚Äî get_excelcnv_exe","text":"path containing 'excelcnv.exe'","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_foerdermengen.html","id":null,"dir":"Reference","previous_headings":"","what":"get_foerdermengen ‚Äî get_foerdermengen","title":"get_foerdermengen ‚Äî get_foerdermengen","text":"get_foerdermengen","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_foerdermengen.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"get_foerdermengen ‚Äî get_foerdermengen","text":"","code":"get_foerdermengen(   xlsx_path,   sheet_name = \"WW Q Rhow \",   sheet_range = \"A4:S127\" )"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_foerdermengen.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"get_foerdermengen ‚Äî get_foerdermengen","text":"xlsx_path path xlsx file pumping rates sheet_name sheet_name (default: \"WW Q Rhow \") sheet_range sheet_range  (default: \"A4:S127\")","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_foerdermengen.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"get_foerdermengen ‚Äî get_foerdermengen","text":"data frame annual pumping rates per waterworks","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_foerdermengen_gal_fri.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Abtraction of Friedrichshagen Well Galleries ‚Äî get_foerdermengen_gal_fri","title":"Get Abtraction of Friedrichshagen Well Galleries ‚Äî get_foerdermengen_gal_fri","text":"Get Abtraction Friedrichshagen Well Galleries","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_foerdermengen_gal_fri.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Abtraction of Friedrichshagen Well Galleries ‚Äî get_foerdermengen_gal_fri","text":"","code":"get_foerdermengen_gal_fri(path)"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_foerdermengen_gal_fri.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Abtraction of Friedrichshagen Well Galleries ‚Äî get_foerdermengen_gal_fri","text":"path path \"2018-04-27 Rohwasser Bericht - Galerief√∂rdermengen.xlsx\"","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_foerdermengen_gal_fri.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Abtraction of Friedrichshagen Well Galleries ‚Äî get_foerdermengen_gal_fri","text":"tidy data frame abstraction rates waterworks Friedrichshagen","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_measurementchains_files.html","id":null,"dir":"Reference","previous_headings":"","what":"Measurement Chains: Get Tidied Files Metadata ‚Äî get_measurementchains_files","title":"Measurement Chains: Get Tidied Files Metadata ‚Äî get_measurementchains_files","text":"Measurement Chains: Get Tidied Files Metadata","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_measurementchains_files.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Measurement Chains: Get Tidied Files Metadata ‚Äî get_measurementchains_files","text":"","code":"get_measurementchains_files(   sftp_connection = create_sftp_connection(),   debug = FALSE )"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_measurementchains_files.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Measurement Chains: Get Tidied Files Metadata ‚Äî get_measurementchains_files","text":"sftp_connection SFTP connnection retrieved create_sftp_connection debug show debug messages (default: FALSE)","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_measurementchains_files.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Measurement Chains: Get Tidied Files Metadata ‚Äî get_measurementchains_files","text":"tibble information available files tidied meta-information based file naming","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_measurementchains_files.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Measurement Chains: Get Tidied Files Metadata ‚Äî get_measurementchains_files","text":"","code":"if (FALSE) { mc_files <- kwb.geosalz::get_measurementchains_files() str(mc_files) }"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_measurementchains_metadata.html","id":null,"dir":"Reference","previous_headings":"","what":"Measurement Chains: Get Metadata ‚Äî get_measurementchains_metadata","title":"Measurement Chains: Get Metadata ‚Äî get_measurementchains_metadata","text":"Measurement Chains: Get Metadata","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_measurementchains_metadata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Measurement Chains: Get Metadata ‚Äî get_measurementchains_metadata","text":"","code":"get_measurementchains_metadata(file = extdata_file(\"metadata_messketten.csv\"))"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_measurementchains_metadata.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Measurement Chains: Get Metadata ‚Äî get_measurementchains_metadata","text":"file path measurement chains metadata file. Default: kwb.geosalz:::extdata_file(\"metadata_messketten.csv\")","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_measurementchains_metadata.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Measurement Chains: Get Metadata ‚Äî get_measurementchains_metadata","text":"tibble measurement chains metadata","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_measurementchains_metadata.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Measurement Chains: Get Metadata ‚Äî get_measurementchains_metadata","text":"","code":"mc_metadata <- kwb.geosalz::get_measurementchains_metadata() str(mc_metadata) #> spc_tbl_ [18 √ó 10] (S3: spec_tbl_df/tbl_df/tbl/data.frame) #>  $ galerie               : chr [1:18] \"K\" \"K\" \"K\" \"K\" ... #>  $ brunnen_nummer        : int [1:18] 9 9 9 9 9 9 10 10 10 10 ... #>  $ dn                    : int [1:18] 400 400 400 400 400 400 600 600 600 600 ... #>  $ einbau_pumpe          : chr [1:18] \"√ºber Filter\" \"√ºber Filter\" \"√ºber Filter\" \"√ºber Filter\" ... #>  $ einbau_messkette      : chr [1:18] \"unter Pumpe\" \"unter Pumpe\" \"unter Pumpe\" \"unter Pumpe\" ... #>  $ filteroberkante_muGOK : num [1:18] 21 21 21 21 21 21 11 11 11 11 ... #>  $ filterunterkante_muGOK: num [1:18] 27 27 27 27 27 27 18 18 18 18 ... #>  $ sensor_id             : int [1:18] 4182018 4182017 4182016 4182015 4182014 4182013 4182006 4182005 4182004 4182003 ... #>  $ sensor_endnummer      : int [1:18] 8 7 6 5 4 3 6 5 4 3 ... #>  $ einbau_sensor_muGOK   : num [1:18] 21.5 22.5 23.5 24.5 25.5 26.5 11.5 12.7 13.9 15.1 ... #>  - attr(*, \"spec\")= #>   .. cols( #>   ..   galerie = col_character(), #>   ..   brunnen_nummer = col_integer(), #>   ..   dn = col_integer(), #>   ..   einbau_pumpe = col_character(), #>   ..   einbau_messkette = col_character(), #>   ..   filteroberkante_muGOK = col_double(), #>   ..   filterunterkante_muGOK = col_double(), #>   ..   sensor_id = col_integer(), #>   ..   sensor_endnummer = col_integer(), #>   ..   einbau_sensor_muGOK = col_double() #>   .. ) #>  - attr(*, \"problems\")=<externalptr>  mc_metadata #> # A tibble: 18 √ó 10 #>    galerie brunnen_nummer    dn einbau_pumpe einbau_messkette          #>    <chr>            <int> <int> <chr>        <chr>                     #>  1 K                    9   400 √ºber Filter  unter Pumpe               #>  2 K                    9   400 √ºber Filter  unter Pumpe               #>  3 K                    9   400 √ºber Filter  unter Pumpe               #>  4 K                    9   400 √ºber Filter  unter Pumpe               #>  5 K                    9   400 √ºber Filter  unter Pumpe               #>  6 K                    9   400 √ºber Filter  unter Pumpe               #>  7 K                   10   600 unter Filter √ºber Pumpe (am Steigrohr) #>  8 K                   10   600 unter Filter √ºber Pumpe (am Steigrohr) #>  9 K                   10   600 unter Filter √ºber Pumpe (am Steigrohr) #> 10 K                   10   600 unter Filter √ºber Pumpe (am Steigrohr) #> 11 K                   10   600 unter Filter √ºber Pumpe (am Steigrohr) #> 12 K                   10   600 unter Filter √ºber Pumpe (am Steigrohr) #> 13 K                   13   600 unter Filter √ºber Pumpe (am Steigrohr) #> 14 K                   13   600 unter Filter √ºber Pumpe (am Steigrohr) #> 15 K                   13   600 unter Filter √ºber Pumpe (am Steigrohr) #> 16 K                   13   600 unter Filter √ºber Pumpe (am Steigrohr) #> 17 K                   13   600 unter Filter √ºber Pumpe (am Steigrohr) #> 18 K                   13   600 unter Filter √ºber Pumpe (am Steigrohr) #> # ‚Ñπ 5 more variables: filteroberkante_muGOK <dbl>, #> #   filterunterkante_muGOK <dbl>, sensor_id <int>, sensor_endnummer <int>, #> #   einbau_sensor_muGOK <dbl>"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_measurement_chain_data_on_cloud.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Measurement Chain Data on KWB Cloud ‚Äî get_measurement_chain_data_on_cloud","title":"Get Measurement Chain Data on KWB Cloud ‚Äî get_measurement_chain_data_on_cloud","text":"Get Measurement Chain Data KWB Cloud","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_measurement_chain_data_on_cloud.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Measurement Chain Data on KWB Cloud ‚Äî get_measurement_chain_data_on_cloud","text":"","code":"get_measurement_chain_data_on_cloud(dbg = TRUE)"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_measurement_chain_data_on_cloud.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Measurement Chain Data on KWB Cloud ‚Äî get_measurement_chain_data_on_cloud","text":"dbg logical indicating whether show debug messages","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_measurement_chain_data_on_cloud.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Measurement Chain Data on KWB Cloud ‚Äî get_measurement_chain_data_on_cloud","text":"data frame content \"mc_data.zip\" GeoSalz project   folder Nextcloud server. SFTP paths files   data \"mc_data.zip\" originate returned attribute \"sftp_paths\".   either files \"mc_data.zip\" \"mc_files.csv\" exist,  NULL returned.","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_measurmentchains_data_stats.html","id":null,"dir":"Reference","previous_headings":"","what":"Measurement Chains: get statistics for data ‚Äî get_measurmentchains_data_stats","title":"Measurement Chains: get statistics for data ‚Äî get_measurmentchains_data_stats","text":"Measurement Chains: get statistics data","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_measurmentchains_data_stats.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Measurement Chains: get statistics for data ‚Äî get_measurmentchains_data_stats","text":"","code":"get_measurmentchains_data_stats(mc_data)"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_measurmentchains_data_stats.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Measurement Chains: get statistics for data ‚Äî get_measurmentchains_data_stats","text":"mc_data tibble measurement chains data retrieved  read_measurementchains_data","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_measurmentchains_data_stats.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Measurement Chains: get statistics for data ‚Äî get_measurmentchains_data_stats","text":"tibble colunns datetime min/max, q10 (10 median, q90 (90","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_meta_sheet_or_stop.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function: get_meta_sheet_or_stop ‚Äî get_meta_sheet_or_stop","title":"Helper function: get_meta_sheet_or_stop ‚Äî get_meta_sheet_or_stop","text":"Helper function: get_meta_sheet_or_stop","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_meta_sheet_or_stop.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function: get_meta_sheet_or_stop ‚Äî get_meta_sheet_or_stop","text":"","code":"get_meta_sheet_or_stop(sheets, pattern, file)"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_meta_sheet_or_stop.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function: get_meta_sheet_or_stop ‚Äî get_meta_sheet_or_stop","text":"sheets sheets pattern pattern file file","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_meta_sheet_or_stop.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Helper function: get_meta_sheet_or_stop ‚Äî get_meta_sheet_or_stop","text":"meta sheet name","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_pandoc_info.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Information on Pandoc ‚Äî get_pandoc_info","title":"Get Information on Pandoc ‚Äî get_pandoc_info","text":"Get Information Pandoc","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_pandoc_info.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Information on Pandoc ‚Äî get_pandoc_info","text":"","code":"get_pandoc_info()"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_pandoc_info.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Information on Pandoc ‚Äî get_pandoc_info","text":"data frame columns pandoc_directory,  pandoc_version Pandoc installed, otherwise message   printed pandoc installed.","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_parameters_meta.html","id":null,"dir":"Reference","previous_headings":"","what":"get_parameters_meta ‚Äî get_parameters_meta","title":"get_parameters_meta ‚Äî get_parameters_meta","text":"get_parameters_meta","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_parameters_meta.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"get_parameters_meta ‚Äî get_parameters_meta","text":"","code":"get_parameters_meta(xlsx_path, sheet_name = \"nur Parameterliste\")"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_parameters_meta.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"get_parameters_meta ‚Äî get_parameters_meta","text":"xlsx_path path EXCEL spreadsheet parameter metadata sheet_name name sheet containing metadata table (default: \"nur Parameterliste\")","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_parameters_meta.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"get_parameters_meta ‚Äî get_parameters_meta","text":"imported parameter metadata cleaned columns names","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_phreeqc_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Get PhreeqC data ‚Äî get_phreeqc_data","title":"Get PhreeqC data ‚Äî get_phreeqc_data","text":"Get PhreeqC data","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_phreeqc_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get PhreeqC data ‚Äî get_phreeqc_data","text":"","code":"get_phreeqc_data(lab_bwb)"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_phreeqc_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get PhreeqC data ‚Äî get_phreeqc_data","text":"lab_bwb imported BWB lab data retrieved read_lab_bwb","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_phreeqc_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get PhreeqC data ‚Äî get_phreeqc_data","text":"tibble columns solution, par_name_phreeqc (empty  NA) numeric_value","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_site_id.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function: get_site_id ‚Äî get_site_id","title":"Helper function: get_site_id ‚Äî get_site_id","text":"Helper function: get_site_id","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_site_id.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function: get_site_id ‚Äî get_site_id","text":"","code":"get_site_id(string, pattern = \"^[0-9]{1,4}\")"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_site_id.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function: get_site_id ‚Äî get_site_id","text":"string vector character strings pattern pattern used identifying site_id (default: \"^[0-9]1,4\")","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/get_site_id.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Helper function: get_site_id ‚Äî get_site_id","text":"extracted site_id`s input string","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/import_labor.html","id":null,"dir":"Reference","previous_headings":"","what":"import_labor ‚Äî import_labor","title":"import_labor ‚Äî import_labor","text":"import_labor","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/import_labor.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"import_labor ‚Äî import_labor","text":"","code":"import_labor(files, export_dir, func = read_bwb_header2)"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/import_labor.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"import_labor ‚Äî import_labor","text":"files vector full paths xlsx input files export_dir export directory func function used (default: read_bwb_header2)","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/import_labor.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"import_labor ‚Äî import_labor","text":"list length equal number input files","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/order_measurement_chain_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Order Measurement Chain Data ‚Äî order_measurement_chain_data","title":"Order Measurement Chain Data ‚Äî order_measurement_chain_data","text":"Order Measurement Chain Data","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/order_measurement_chain_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Order Measurement Chain Data ‚Äî order_measurement_chain_data","text":"","code":"order_measurement_chain_data(data)"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/order_measurement_chain_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Order Measurement Chain Data ‚Äî order_measurement_chain_data","text":"data data frame retrieved read_measurementchains_data","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/order_measurement_chain_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Order Measurement Chain Data ‚Äî order_measurement_chain_data","text":"data, ordered \"parameter\", \"sensor_id\", \"datum_uhrzeit\"","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator ‚Äî %>%","title":"Pipe operator ‚Äî %>%","text":"See magrittr::%>% details.","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator ‚Äî %>%","text":"","code":"lhs %>% rhs"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/plot_measurementchains.html","id":null,"dir":"Reference","previous_headings":"","what":"Measurement Chains: plott ‚Äî plot_measurementchains","title":"Measurement Chains: plott ‚Äî plot_measurementchains","text":"Measurement Chains: plott","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/plot_measurementchains.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Measurement Chains: plott ‚Äî plot_measurementchains","text":"","code":"plot_measurementchains(mc_data, para = \"Leitfaehigkeit\")"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/plot_measurementchains.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Measurement Chains: plott ‚Äî plot_measurementchains","text":"mc_data retrieved read_measurementchains_data para parameter plot \"Leitfaehigkeit\" \"Temperatur\" (default:  Leitfaehigkeit\")","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/plot_measurementchains.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Measurement Chains: plott ‚Äî plot_measurementchains","text":"plot selected measurement chain parameter","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/prepare_phreeqc_input.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare PhreeqC input ‚Äî prepare_phreeqc_input","title":"Prepare PhreeqC input ‚Äî prepare_phreeqc_input","text":"Prepare PhreeqC input","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/prepare_phreeqc_input.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare PhreeqC input ‚Äî prepare_phreeqc_input","text":"","code":"prepare_phreeqc_input(lab_bwb_phreeqc, title = \"\")"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/prepare_phreeqc_input.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare PhreeqC input ‚Äî prepare_phreeqc_input","text":"lab_bwb_phreeqc selected BWB lab data retrieved get_phreeqc_data title user defined title (default: \"\")","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/prepare_phreeqc_input.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prepare PhreeqC input ‚Äî prepare_phreeqc_input","text":"data frame input structure kwb.phreeqc","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/print_datatype_info_if.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function: print_datatype_info_if ‚Äî print_datatype_info_if","title":"Helper function: print_datatype_info_if ‚Äî print_datatype_info_if","text":"Helper function: print_datatype_info_if","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/print_datatype_info_if.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function: print_datatype_info_if ‚Äî print_datatype_info_if","text":"","code":"print_datatype_info_if(dbg, tbl_datatypes, columns_keep)"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/print_datatype_info_if.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function: print_datatype_info_if ‚Äî print_datatype_info_if","text":"dbg dbg tbl_datatypes tbl_datatypes columns_keep columns_keep","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_bwb_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Import: read_bwb_data ‚Äî read_bwb_data","title":"Import: read_bwb_data ‚Äî read_bwb_data","text":"wrapper around read_bwb_header2 read_bwb_header1_meta","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_bwb_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Import: read_bwb_data ‚Äî read_bwb_data","text":"","code":"read_bwb_data(   files,   meta_pattern = \"META\",   keep_pattern = column_pattern_gather_ignore(),   site_id_pattern = \"^[0-9]{1,4}\",   dbg = TRUE )"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_bwb_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Import: read_bwb_data ‚Äî read_bwb_data","text":"files file path(s) EXCEL spreadsheet meta_pattern (default: \"META\") keep_pattern (default: column_pattern_gather_ignore) site_id_pattern (default: \"^[0-9]1,4\") dbg debug (default: TRUE)","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_bwb_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Import: read_bwb_data ‚Äî read_bwb_data","text":"data.table imported xls(x) files","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_bwb_header1_meta.html","id":null,"dir":"Reference","previous_headings":"","what":"Import: read_bwb_header1_meta ‚Äî read_bwb_header1_meta","title":"Import: read_bwb_header1_meta ‚Äî read_bwb_header1_meta","text":"Import: read_bwb_header1_meta","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_bwb_header1_meta.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Import: read_bwb_header1_meta ‚Äî read_bwb_header1_meta","text":"","code":"read_bwb_header1_meta(   file,   meta_pattern = \"META\",   keep_pattern = column_pattern_gather_ignore(),   dbg = FALSE )"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_bwb_header1_meta.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Import: read_bwb_header1_meta ‚Äî read_bwb_header1_meta","text":"file path(s) EXCEL spreadsheet meta_pattern meta_pattern default(\"META\") keep_pattern keep_pattern (default: column_pattern_gather_ignore) dbg debug (default: FALSE)","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_bwb_header1_meta.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Import: read_bwb_header1_meta ‚Äî read_bwb_header1_meta","text":"data.table imported xls(x) files","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_bwb_header2.html","id":null,"dir":"Reference","previous_headings":"","what":"Import: read_bwb_header2 ‚Äî read_bwb_header2","title":"Import: read_bwb_header2 ‚Äî read_bwb_header2","text":"Import: read_bwb_header2","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_bwb_header2.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Import: read_bwb_header2 ‚Äî read_bwb_header2","text":"","code":"read_bwb_header2(   file,   skip = 2,   keep_pattern = column_pattern_gather_ignore(),   site_id_pattern = \"^[0-9]{1,4}\",   dbg = TRUE )"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_bwb_header2.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Import: read_bwb_header2 ‚Äî read_bwb_header2","text":"file file path(s) EXCEL spreadsheet skip number rows skip sheet (default: 2) keep_pattern (default: column_pattern_gather_ignore()) site_id_pattern (default: \"^[0-9]1,4\") dbg debug (default: TRUE)","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_bwb_header2.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Import: read_bwb_header2 ‚Äî read_bwb_header2","text":"data.table imported xls(x) files","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_bwb_header4.html","id":null,"dir":"Reference","previous_headings":"","what":"Import: read_bwb_header4 ‚Äî read_bwb_header4","title":"Import: read_bwb_header4 ‚Äî read_bwb_header4","text":"Import: read_bwb_header4","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_bwb_header4.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Import: read_bwb_header4 ‚Äî read_bwb_header4","text":"","code":"read_bwb_header4(   file,   skip = 4,   keep_pattern = column_pattern_gather_ignore(),   site_id_pattern = \"^[0-9]{1,4}\",   dbg = TRUE )"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_bwb_header4.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Import: read_bwb_header4 ‚Äî read_bwb_header4","text":"file file path(s) EXCEL spreadsheet skip number rows skip sheet (default: 4) keep_pattern (default: column_pattern_gather_ignore()) site_id_pattern (default: \"^[0-9]1,4\") dbg debug (default: TRUE)","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_bwb_header4.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Import: read_bwb_header4 ‚Äî read_bwb_header4","text":"data.table imported xls(x) files","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_emshoff91_ods.html","id":null,"dir":"Reference","previous_headings":"","what":"Reads a Single EMSHOFF 91 ODS File into Tibble ‚Äî read_emshoff91_ods","title":"Reads a Single EMSHOFF 91 ODS File into Tibble ‚Äî read_emshoff91_ods","text":"Reads Single EMSHOFF 91 ODS File Tibble","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_emshoff91_ods.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Reads a Single EMSHOFF 91 ODS File into Tibble ‚Äî read_emshoff91_ods","text":"","code":"read_emshoff91_ods(emshoff91_import_selected)"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_emshoff91_ods.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Reads a Single EMSHOFF 91 ODS File into Tibble ‚Äî read_emshoff91_ods","text":"emshoff91_import_selected row retrieved create_emshoff91_import","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_emshoff91_ods.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Reads a Single EMSHOFF 91 ODS File into Tibble ‚Äî read_emshoff91_ods","text":"imports ods file tibble","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_isotopes.html","id":null,"dir":"Reference","previous_headings":"","what":"Read Isotopes ‚Äî read_isotopes","title":"Read Isotopes ‚Äî read_isotopes","text":"Read Isotopes","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_isotopes.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read Isotopes ‚Äî read_isotopes","text":"","code":"read_isotopes(path)"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_isotopes.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read Isotopes ‚Äî read_isotopes","text":"path path Isotopes delim (field separator \";\")","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_isotopes.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Read Isotopes ‚Äî read_isotopes","text":"imported isotopes data","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_lab_bwb.html","id":null,"dir":"Reference","previous_headings":"","what":"Read Lab BWB ‚Äî read_lab_bwb","title":"Read Lab BWB ‚Äî read_lab_bwb","text":"Read Lab BWB","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_lab_bwb.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read Lab BWB ‚Äî read_lab_bwb","text":"","code":"read_lab_bwb(path, sheet = \"Analysen\")"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_lab_bwb.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read Lab BWB ‚Äî read_lab_bwb","text":"path path file lab BWB data sheet name sheet containing analysis data. Default: \"Analysen\"","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_lab_bwb.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Read Lab BWB ‚Äî read_lab_bwb","text":"cleaned data frame master data lab values samples  selected parameters (columns -BA HB-HC)","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_master_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Read Master Data ‚Äî read_master_data","title":"Read Master Data ‚Äî read_master_data","text":"Read Master Data","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_master_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read Master Data ‚Äî read_master_data","text":"","code":"read_master_data(path)"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_master_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read Master Data ‚Äî read_master_data","text":"path path file master data (currently file: lab BWB data)","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_master_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Read Master Data ‚Äî read_master_data","text":"imported master data contained sheet \"Stammdaten\"","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_measurementchains_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Measurement Chains: read csv data from multiple files ‚Äî read_measurementchains_data","title":"Measurement Chains: read csv data from multiple files ‚Äî read_measurementchains_data","text":"Measurement Chains: read csv data multiple files","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_measurementchains_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Measurement Chains: read csv data from multiple files ‚Äî read_measurementchains_data","text":"","code":"read_measurementchains_data(   csv_files,   datetime_installation = as_gmt_plus_one(\"2022-09-27 11:00:00\"),   run_parallel = TRUE,   debug = FALSE )"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_measurementchains_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Measurement Chains: read csv data from multiple files ‚Äî read_measurementchains_data","text":"csv_files vector paths retrieved download_measurementchains_data datetime_installation datetime first logger installation well K10.  Used filter older measurement data! Default:  kwb.geosalz:::as_gmt_plus_one(\"2022-09-27 11:00:00\") run_parallel default: TRUE debug show debug messages (default: FALSE)","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_measurementchains_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Measurement Chains: read csv data from multiple files ‚Äî read_measurementchains_data","text":"data frame imported data csv files","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_measurementchains_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Measurement Chains: read csv data from multiple files ‚Äî read_measurementchains_data","text":"","code":"if (FALSE) { mc_files <- kwb.geosalz::get_measurementchains_files() target_directory <- tempdir() csv_files <- kwb.geosalz::download_measurementchains_data(   sftp_paths = mc_files$sftp_path,   target_directory ) mc_data <- kwb.geosalz::read_measurementchains_data(csv_files) }"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_multiple_emshoff91_ods.html","id":null,"dir":"Reference","previous_headings":"","what":"Reads Multiple EMSHOFF 91 ODS Files into List ‚Äî read_multiple_emshoff91_ods","title":"Reads Multiple EMSHOFF 91 ODS Files into List ‚Äî read_multiple_emshoff91_ods","text":"Reads Multiple EMSHOFF 91 ODS Files List","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_multiple_emshoff91_ods.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Reads Multiple EMSHOFF 91 ODS Files into List ‚Äî read_multiple_emshoff91_ods","text":"","code":"read_multiple_emshoff91_ods(emshoff91_import)"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_multiple_emshoff91_ods.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Reads Multiple EMSHOFF 91 ODS Files into List ‚Äî read_multiple_emshoff91_ods","text":"emshoff91_import tibble retrieved create_emshoff91_import","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_multiple_emshoff91_ods.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Reads Multiple EMSHOFF 91 ODS Files into List ‚Äî read_multiple_emshoff91_ods","text":"imports mulitple ods files list tibbles","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/read_multiple_emshoff91_ods.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Reads Multiple EMSHOFF 91 ODS Files into List ‚Äî read_multiple_emshoff91_ods","text":"","code":"if (FALSE) { ods_dir <- \"<replace-with-path-to-files>/emshoff91/emshoff91/converted_ods\" ods_dir <- \"C:/users/mrustl/Downloads/emshoff91/emshoff91/converted_ods\" emshoff91_import <- create_emshoff91_import(ods_dir) read_multiple_emshoff91_ods(emshoff91_import) }"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/replace_nanb_with_na.html","id":null,"dir":"Reference","previous_headings":"","what":"Replace n.a. (not available) and n.b. (not determined) from lab data with NA ‚Äî replace_nanb_with_na","title":"Replace n.a. (not available) and n.b. (not determined) from lab data with NA ‚Äî replace_nanb_with_na","text":"Replace n.. (available) n.b. (determined) lab data NA","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/replace_nanb_with_na.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Replace n.a. (not available) and n.b. (not determined) from lab data with NA ‚Äî replace_nanb_with_na","text":"","code":"replace_nanb_with_na(string)"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/replace_nanb_with_na.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Replace n.a. (not available) and n.b. (not determined) from lab data with NA ‚Äî replace_nanb_with_na","text":"string string","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/replace_nanb_with_na.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Replace n.a. (not available) and n.b. (not determined) from lab data with NA ‚Äî replace_nanb_with_na","text":"string NA instead \"n..\" \"n.b.\" (including 0-10 spaces  \"n\" \"\"/\"b\"","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/replace_nanb_with_na.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Replace n.a. (not available) and n.b. (not determined) from lab data with NA ‚Äî replace_nanb_with_na","text":"","code":"string <- c(\"19.2\", \"n.b.\", \"n. b.\", \"n.  b.\", \"n.a.\", \"n. a.\", \"n.  a.\") replace_nanb_with_na(string) #> [1] \"19.2\" NA     NA     NA     NA     NA     NA"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/safe_office_folder.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function: safe_office_folder ‚Äî safe_office_folder","title":"Helper function: safe_office_folder ‚Äî safe_office_folder","text":"Helper function: safe_office_folder","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/safe_office_folder.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function: safe_office_folder ‚Äî safe_office_folder","text":"","code":"safe_office_folder(office_path = \"C:/Program Files (x86)/Microsoft Office\")"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/safe_office_folder.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function: safe_office_folder ‚Äî safe_office_folder","text":"office_path office folder path (default: \"C:/Program Files (x86)/Microsoft Office\")","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/safe_office_folder.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Helper function: safe_office_folder ‚Äî safe_office_folder","text":"path office folder (existing)","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/stop_formatted.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function: stop_formatted ‚Äî stop_formatted","title":"Helper function: stop_formatted ‚Äî stop_formatted","text":"Helper function: stop_formatted","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/stop_formatted.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function: stop_formatted ‚Äî stop_formatted","text":"","code":"stop_formatted(fmt, ...)"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/stop_formatted.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function: stop_formatted ‚Äî stop_formatted","text":"fmt fmt ... arguments passed fmt","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/stop_formatted.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Helper function: stop_formatted ‚Äî stop_formatted","text":"calls stop fmt additional arguments defined ...","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/stop_if_duplicated_samples_found.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function: stop if duplicated sample ids are found ‚Äî stop_if_duplicated_samples_found","title":"Helper function: stop if duplicated sample ids are found ‚Äî stop_if_duplicated_samples_found","text":"Helper function: stop duplicated sample ids found","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/stop_if_duplicated_samples_found.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function: stop if duplicated sample ids are found ‚Äî stop_if_duplicated_samples_found","text":"","code":"stop_if_duplicated_samples_found(df, col_sampleid, path, sheet = \"\")"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/stop_if_duplicated_samples_found.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function: stop if duplicated sample ids are found ‚Äî stop_if_duplicated_samples_found","text":"df data frame samples wide format col_sampleid column name sample id path path file df read (information ) sheet optional case EXCEL used (default: \"\")","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/stop_if_duplicated_samples_found.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Helper function: stop if duplicated sample ids are found ‚Äî stop_if_duplicated_samples_found","text":"error case duplicated samples found","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/stop_on_missing_or_inform_on_extra_sheets.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function: stop_on_missing_or_inform_on_extra_sheets ‚Äî stop_on_missing_or_inform_on_extra_sheets","title":"Helper function: stop_on_missing_or_inform_on_extra_sheets ‚Äî stop_on_missing_or_inform_on_extra_sheets","text":"Helper function: stop_on_missing_or_inform_on_extra_sheets","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/stop_on_missing_or_inform_on_extra_sheets.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function: stop_on_missing_or_inform_on_extra_sheets ‚Äî stop_on_missing_or_inform_on_extra_sheets","text":"","code":"stop_on_missing_or_inform_on_extra_sheets(has_site_id, file, sheets)"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/stop_on_missing_or_inform_on_extra_sheets.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function: stop_on_missing_or_inform_on_extra_sheets ‚Äî stop_on_missing_or_inform_on_extra_sheets","text":"has_site_id has_site_id file file sheets sheets","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/to_full_metadata_2.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function: to_full_metadata2 ‚Äî to_full_metadata_2","title":"Helper function: to_full_metadata2 ‚Äî to_full_metadata_2","text":"Helper function: to_full_metadata2","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/to_full_metadata_2.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function: to_full_metadata2 ‚Äî to_full_metadata_2","text":"","code":"to_full_metadata_2(header, file, sheet)"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/to_full_metadata_2.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function: to_full_metadata2 ‚Äî to_full_metadata_2","text":"header header file file sheet sheet","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/to_full_metadata_2.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Helper function: to_full_metadata2 ‚Äî to_full_metadata_2","text":"data frame metadata header2 (EXCEL) files","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/to_full_metadata_4.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function: to_full_metadata_4 ‚Äî to_full_metadata_4","title":"Helper function: to_full_metadata_4 ‚Äî to_full_metadata_4","text":"Helper function: to_full_metadata_4","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/to_full_metadata_4.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function: to_full_metadata_4 ‚Äî to_full_metadata_4","text":"","code":"to_full_metadata_4(header, file, sheet)"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/to_full_metadata_4.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function: to_full_metadata_4 ‚Äî to_full_metadata_4","text":"header header file file sheet sheet","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/to_full_metadata_4.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Helper function: to_full_metadata_4 ‚Äî to_full_metadata_4","text":"data frame metadata header4 (EXCEL) files","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/write_measurementchains_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Measurement Chains: write csv data ‚Äî write_measurementchains_data","title":"Measurement Chains: write csv data ‚Äî write_measurementchains_data","text":"Measurement Chains: write csv data","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/write_measurementchains_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Measurement Chains: write csv data ‚Äî write_measurementchains_data","text":"","code":"write_measurementchains_data(   mc_data,   target_directory,   to_zip = FALSE,   debug = FALSE )"},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/write_measurementchains_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Measurement Chains: write csv data ‚Äî write_measurementchains_data","text":"mc_data measurement chains data retrieved  read_measurementchains_data target_directory target directory to_zip data zipped? (default: FALSE), TRUE  temporary csv file created subsequently zipped deleted debug print debug messages (default: FALSE)","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/reference/write_measurementchains_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Measurement Chains: write csv data ‚Äî write_measurementchains_data","text":"writes csv data path","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/news/index.html","id":"kwbgeosalz-060-2023-04-14","dir":"Changelog","previous_headings":"","what":"kwb.geosalz 0.6.0 2023-04-14","title":"kwb.geosalz 0.6.0 2023-04-14","text":"Add dependency kwb.nextcloud (required vignette measurement-chains.Rmd) Consider change variable name new Wasserportal API vignette wasserportal.Rmd Fix bug create_sftp_connection(): provide variable con_vars () Add error handling vignette measurement-chains.Rmd","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/news/index.html","id":"kwbgeosalz-050-2022-10-11","dir":"Changelog","previous_headings":"","what":"kwb.geosalz 0.5.0 2022-10-11","title":"kwb.geosalz 0.5.0 2022-10-11","text":"Bugfix: fix read_lab_bwb() leading crash case importing Hydrochemie_Gesamt_Geosalz_v1.0.6.xlsx (see fix Add stop_if_duplicated_samples_found() read_lab_bwb() read_isotopes() throw error case imported dataset contains duplicated sample_id Articles Added Measurement Chains data import workflow electrical conductivity temperature, installed productions wells September (K10: 2022-09-27) October 2022 (K9: 2022-10-17, K13: 2022-10-16). Data SFTP server downloaded, aggregated exported restricted KWB cloud weekday 07:00:00 UTC. (see .github/pkgdown.yml#L11).","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/news/index.html","id":"kwbgeosalz-040-2022-08-25","dir":"Changelog","previous_headings":"","what":"kwb.geosalz 0.4.0 2022-08-25","title":"kwb.geosalz 0.4.0 2022-08-25","text":"Functions Emshoff 91 .ods Import: create_emshoff91_import() read_emshoff91_ods() reads single .ods files read_multiple_emshoff91_ods() wrapper around read_emshoff91_ods() reading multiple .ods files returning list Hydrochemistry: added read_lab_bwb() import lab data BWB read_isotopes() import isotope data analysed UFZ added get_phreeqc_data() filter parameters imported read_lab_bwb() required PhreeqC. order transform filtered data function convert_phreeqc_input_to_wide() can used. Finally filtered data (retrieved get_phreeqc_data()) used prepare_phreeqc_input() creating PhreeqC input file. Wasserportal: added convert_to_sf() convert xy-coordinates (.e.¬†UTM_33N crs = 25833) spatial feature object (crs = 4326) Articles Added Emshoff 91 data import ods files (formerly saved Quattro Pro (converted help LibreOffice (7.0) Ubuntu .ods .xlsx. However, latter used due possible mis-translation! Added Hydrochemistry data preparation workflow lab data PhreeqC Added Wasserportal data availability southern part SVM Friedrichshagen","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/news/index.html","id":"kwbgeosalz-030-2022-06-20","dir":"Changelog","previous_headings":"","what":"kwb.geosalz 0.3.0 2022-06-20","title":"kwb.geosalz 0.3.0 2022-06-20","text":"Adding functionality checking data availability SVM Friedrichshagen based available BWB data pre-project phase (digitalised KWB) open-data Wasserportal Berlin Functions Add convert_to_sf() converting different CRS projections 4326 (OSM map used background map) Workflows Added new workflow Wasserportal checking available data Wasserportal Berlin Updated workflow Data Availability WW Friedrichshagen checking available data pre-project phase (see: workflow article)","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/news/index.html","id":"kwbgeosalz-020-2022-06-01","dir":"Changelog","previous_headings":"","what":"kwb.geosalz 0.2.0 2022-06-01","title":"kwb.geosalz 0.2.0 2022-06-01","text":"Add get_foerdermengen_gal_fri() getting annual abstraction values well field galeries waterworks Friedrichshagen Add workflow Data Availability WW Friedrichshagen checking available data pre-project phase (see: workflow article)","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/news/index.html","id":"kwbgeosalz-010-2019-02-13","dir":"Changelog","previous_headings":"","what":"kwb.geosalz 0.1.0 2019-02-13","title":"kwb.geosalz 0.1.0 2019-02-13","text":"Release Zenodo","code":""},{"path":"https://kwb-r.github.io/kwb.geosalz/news/index.html","id":"kwbgeosalz-0109000-unreleased","dir":"Changelog","previous_headings":"","what":"kwb.geosalz 0.1.0.9000 unreleased","title":"kwb.geosalz 0.1.0.9000 unreleased","text":"Wrapped KWB-R/GeoSalz@88ae17 R package ‚Äúkwb.geosalz‚Äù better workflow documentation Note: Formalising R scripts R package lead major improvements (bug removal) due build-‚ÄúCheck‚Äù functionality R packages! Integrated R functions Integrated ‚Äúmain.R‚Äù ‚Äúvignettes/workflow.Rmd‚Äù documenting workflow see http://style.tidyverse.org/news.html writing good NEWS.md","code":""}]
